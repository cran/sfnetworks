<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />


<meta name="date" content="2024-04-09" />

<title>3. Spatial joins and filters</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">3. Spatial joins and filters</h1>
<h4 class="date">2024-04-09</h4>



<STYLE type="text/css" scoped>
PRE.fansi SPAN {padding-top: .25em; padding-bottom: .25em};
</STYLE>
<p>The integration with <code>sf</code> and addition of several spatial
network specific functions in <code>sfnetworks</code> allow to easily
filter information from a network based on spatial relationships, and to
join new information into a network based on spatial relationships. This
vignette presents several ways to do that.</p>
<p>Both spatial filters and spatial joins use spatial predicate
functions to examine spatial relationships. Spatial predicates are
mathematically defined binary spatial relations between two simple
feature geometries. Often used examples include the predicate
<em>equals</em> (geometry x is equal to geometry y) and the predicate
<em>intersects</em> (geometry x has at least one point in common with
geometry y). For an overview of all available spatial predicate
functions in <code>sf</code> and links to detailed explanations of the
underlying algorithms, see <a href="https://r-spatial.github.io/sf/reference/geos_binary_pred.html">here</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(sfnetworks)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(tidygraph)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co">#&gt; Warning: package &#39;dplyr&#39; was built under R version 4.3.2</span></span></code></pre></div>
<div id="spatial-filters" class="section level2">
<h2>Spatial filters</h2>
<div id="using-st_filter" class="section level3">
<h3>Using st_filter</h3>
<p>Information can be filtered from a network by using spatial predicate
functions inside the sf function <code>sf::st_filter()</code>, which
works as follows: the function is applied to a set of geometries A with
respect to another set of geometries B, and removes features from A
based on their spatial relation with the features in B. A practical
example: when using the predicate <em>intersects</em>, all geometries in
A that do not intersect with any geometry in B are removed.</p>
<p>When applying <code>sf::st_filter()</code> to a sfnetwork, it is
internally applied to the active element of that network. For example:
filtering information from a network A with activated nodes, using a set
of polygons B and the predicate <em>intersects</em>, will remove those
nodes that do not intersect with any of the polygons in B from the
network. When edges are active, it will remove the edges that do not
intersect with any of the polygons in B from the network.</p>
<p>Although the filter is applied only to the active element of the
network, it may also affect the other element. When nodes are removed,
their incident edges are removed as well. However, when edges are
removed, the nodes at their endpoints remain, even if they don’t have
any other incident edges. This behavior is inherited from
<code>tidygraph</code> and understandable from a graph theory point of
view: by definition nodes can exist peacefully in isolation, while edges
can never exist without nodes at their endpoints.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>p1 <span class="ot">=</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="dv">4151358</span>, <span class="dv">3208045</span>))</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>p2 <span class="ot">=</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="dv">4151340</span>, <span class="dv">3207120</span>))</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>p3 <span class="ot">=</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="dv">4151856</span>, <span class="dv">3207106</span>))</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>p4 <span class="ot">=</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="dv">4151874</span>, <span class="dv">3208031</span>))</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>poly <span class="ot">=</span> <span class="fu">st_multipoint</span>(<span class="fu">c</span>(p1, p2, p3, p4)) <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  <span class="fu">st_cast</span>(<span class="st">&quot;POLYGON&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  <span class="fu">st_sfc</span>(<span class="at">crs =</span> <span class="dv">3035</span>)</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>net <span class="ot">=</span> <span class="fu">as_sfnetwork</span>(roxel) <span class="sc">%&gt;%</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="dv">3035</span>)</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>filtered <span class="ot">=</span> <span class="fu">st_filter</span>(net, poly, <span class="at">.pred =</span> st_intersects)</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="fu">plot</span>(poly, <span class="at">border =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lty =</span> <span class="dv">4</span>, <span class="at">lwd =</span> <span class="dv">4</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="fu">plot</span>(filtered, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="50%" /><img src="data:image/png;base64,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" width="50%" /></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>filtered <span class="ot">=</span> net <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">&quot;edges&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>  <span class="fu">st_filter</span>(poly, <span class="at">.pred =</span> st_intersects)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="fu">plot</span>(poly, <span class="at">border =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lty =</span> <span class="dv">4</span>, <span class="at">lwd =</span> <span class="dv">4</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="fu">plot</span>(filtered, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="50%" /><img src="data:image/png;base64,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" width="50%" /></p>
<p>The isolated nodes that remain after filtering the edges can be
easily removed using a combination of a regular
<code>dplyr::filter()</code> verb and the
<code>tidygraph::node_is_isolated()</code> query function.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>filtered <span class="ot">=</span> net <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">&quot;edges&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="fu">st_filter</span>(poly, <span class="at">.pred =</span> st_intersects) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">&quot;nodes&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">node_is_isolated</span>())</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="fu">plot</span>(poly, <span class="at">border =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lty =</span> <span class="dv">4</span>, <span class="at">lwd =</span> <span class="dv">4</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="fu">plot</span>(filtered, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="50%" /><img src="data:image/png;base64,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" width="50%" /></p>
<p>Filtering can also be done with other predicates.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>point <span class="ot">=</span> <span class="fu">st_centroid</span>(<span class="fu">st_combine</span>(net))</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>filtered <span class="ot">=</span> net <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">&quot;nodes&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  <span class="fu">st_filter</span>(point, <span class="at">.predicate =</span> st_is_within_distance, <span class="at">dist =</span> <span class="dv">500</span>)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="fu">plot</span>(point, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">cex =</span> <span class="dv">3</span>, <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="fu">plot</span>(filtered, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="50%" /><img src="data:image/png;base64,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" width="50%" /></p>
<p>For non-spatial filters applied to attribute columns, simply use
<code>dplyr::filter()</code> instead of
<code>sf::st_filter()</code>.</p>
</div>
<div id="using-spatial-node-and-edge-query-functions" class="section level3">
<h3>Using spatial node and edge query functions</h3>
<p>In <code>tidygraph</code>, filtering information from networks is
done by using specific node or edge query functions inside the
<code>dplyr::filter()</code> verb. An example was already shown above,
where isolated nodes were removed from the network.</p>
<p>In <code>sfnetworks</code>, several spatial predicates are
implemented as node and edge query functions such that you can also do
spatial filtering in tidygraph style. See <a href="https://luukvdmeer.github.io/sfnetworks/reference/spatial_node_predicates.html">here</a>
for a list of all implemented spatial node query functions, and <a href="https://luukvdmeer.github.io/sfnetworks/reference/spatial_edge_predicates.html">here</a>
for the spatial edge query functions.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>filtered <span class="ot">=</span> net <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">&quot;edges&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">edge_intersects</span>(poly)) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">&quot;nodes&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">node_is_isolated</span>())</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="fu">plot</span>(poly, <span class="at">border =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lty =</span> <span class="dv">4</span>, <span class="at">lwd =</span> <span class="dv">4</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="fu">plot</span>(filtered, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="50%" /><img src="data:image/png;base64,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" width="50%" /></p>
<p>A nice application of this in road networks is to find underpassing
and overpassing roads (i.e. edges that cross other edges but are not
connected at that point). As we can see in the example below, such roads
are not present in our Roxel data, which results in a network without
edges.</p>
<p>The <code>tidygraph::.E()</code> function used in the example makes
it possible to directly access the complete edges table inside verbs. In
this case, that means that for each edge we evaluate if it crosses with
<em>any</em> other edge in the network. Similarly, we can use
<code>tidygraph::.N()</code> to access the nodes table and
<code>tidygraph::.G()</code> to access the network object as a
whole.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>net <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">&quot;edges&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">edge_crosses</span>(<span class="fu">.E</span>()))</span></code></pre></div>
<PRE class="fansi fansi-output"><CODE>#&gt; <span style="color: #555555;"># A sfnetwork with</span> <span style="color: #555555;">701</span> <span style="color: #555555;">nodes and</span> <span style="color: #555555;">0</span> <span style="color: #555555;">edges
#&gt; #
#&gt; # CRS: </span> <span style="color: #555555;">EPSG:3035</span> <span style="color: #555555;">
#&gt; #
#&gt; # A rooted forest with 701 trees with spatially explicit edges
#&gt; #
#&gt; # A tibble: 0 × 5</span>
#&gt; <span style="color: #555555;"># ℹ 5 variables: from &lt;int&gt;, to &lt;int&gt;, name &lt;chr&gt;, type &lt;fct&gt;,</span>
#&gt; <span style="color: #555555;">#   geometry &lt;GEOMETRY [m]&gt;</span>
#&gt; <span style="color: #555555;">#
#&gt; # A tibble: 701 × 1</span>
#&gt;            geometry
#&gt;         <span style="color: #555555; font-style: italic;">&lt;POINT [m]&gt;</span>
#&gt; <span style="color: #555555;">1</span> (4151491 3207923)
#&gt; <span style="color: #555555;">2</span> (4151474 3207946)
#&gt; <span style="color: #555555;">3</span> (4151398 3207777)
#&gt; <span style="color: #555555;"># ℹ 698 more rows</span>
</CODE></PRE>
<p>If you just want to store the information about the investigated
spatial relation, without filtering the network, you can also use the
spatial node and edge query functions inside a
<code>dplyr::mutate()</code> verb.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>net <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">in_poly =</span> <span class="fu">node_intersects</span>(poly))</span></code></pre></div>
<PRE class="fansi fansi-output"><CODE>#&gt; <span style="color: #555555;"># A sfnetwork with</span> <span style="color: #555555;">701</span> <span style="color: #555555;">nodes and</span> <span style="color: #555555;">851</span> <span style="color: #555555;">edges
#&gt; #
#&gt; # CRS: </span> <span style="color: #555555;">EPSG:3035</span> <span style="color: #555555;">
#&gt; #
#&gt; # A directed multigraph with 14 components with spatially explicit edges
#&gt; #
#&gt; # A tibble: 701 × 2</span>
#&gt;            geometry in_poly
#&gt;         <span style="color: #555555; font-style: italic;">&lt;POINT [m]&gt;</span> <span style="color: #555555; font-style: italic;">&lt;lgl&gt;</span>  
#&gt; <span style="color: #555555;">1</span> (4151491 3207923) TRUE   
#&gt; <span style="color: #555555;">2</span> (4151474 3207946) TRUE   
#&gt; <span style="color: #555555;">3</span> (4151398 3207777) TRUE   
#&gt; <span style="color: #555555;">4</span> (4151370 3207673) TRUE   
#&gt; <span style="color: #555555;">5</span> (4151408 3207539) TRUE   
#&gt; <span style="color: #555555;">6</span> (4151421 3207592) TRUE   
#&gt; <span style="color: #555555;"># ℹ 695 more rows</span>
#&gt; <span style="color: #555555;">#
#&gt; # A tibble: 851 × 5</span>
#&gt;    from    to name                  type                                geometry
#&gt;   <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>                       <span style="color: #555555; font-style: italic;">&lt;LINESTRING [m]&gt;</span>
#&gt; <span style="color: #555555;">1</span>     1     2 Havixbecker Strasse   residential (4151491 3207923, 4151474 32079…
#&gt; <span style="color: #555555;">2</span>     3     4 Pienersallee          secondary   (4151398 3207777, 4151390 32077…
#&gt; <span style="color: #555555;">3</span>     5     6 Schulte-Bernd-Strasse residential (4151408 3207539, 4151417 32075…
#&gt; <span style="color: #555555;"># ℹ 848 more rows</span>
</CODE></PRE>
<p>Besides predicate query functions, you can also use the <a href="https://luukvdmeer.github.io/sfnetworks/reference/node_coordinates.html">coordinate
query functions</a> for spatial filters on the nodes. For example:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>v <span class="ot">=</span> <span class="dv">4152000</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>l <span class="ot">=</span> <span class="fu">st_linestring</span>(<span class="fu">rbind</span>(<span class="fu">c</span>(v, <span class="fu">st_bbox</span>(net)[<span class="st">&quot;ymin&quot;</span>]), <span class="fu">c</span>(v, <span class="fu">st_bbox</span>(net)[<span class="st">&quot;ymax&quot;</span>])))</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>filtered_by_coords <span class="ot">=</span> net <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">&quot;nodes&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">node_X</span>() <span class="sc">&gt;</span> v)</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="fu">plot</span>(l, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lty =</span> <span class="dv">4</span>, <span class="at">lwd =</span> <span class="dv">4</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="fu">plot</span>(filtered_by_coords, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="50%" /><img src="data:image/png;base64,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" width="50%" /></p>
</div>
<div id="clipping" class="section level3">
<h3>Clipping</h3>
<p>Filtering returns a subset of the original geometries, but leaves
those geometries themselves unchanged. This is different from clipping,
in which they get cut at the border of a provided clip feature. There
are three ways in which you can do this:
<code>sf::st_intersection()</code> keeps only those parts of the
original geometries that lie within the clip feature,
<code>sf::st_difference()</code> keeps only those parts of the original
geometries that lie outside the clip feature, and
<code>sf::st_crop()</code> keeps only those parts of the original
geometries that lie within the bounding box of the clip feature.</p>
<p>Note that in the case of the nodes, clipping is not different from
filtering, since point geometries cannot fall party inside and partly
outside another feature. However, in the case of the edges, clipping
will cut the linestring geometries of the edges at the border of the
clip feature (or in the case of cropping, the bounding box of that
feature). To preserve a valid spatial network structure,
<code>sfnetworks</code> adds new nodes at these cut locations.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>clipped <span class="ot">=</span> net <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">&quot;edges&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="fu">st_intersection</span>(poly) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">&quot;nodes&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">node_is_isolated</span>())</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co">#&gt; Warning: attribute variables are assumed to be spatially constant throughout</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="co">#&gt; all geometries</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="fu">plot</span>(poly, <span class="at">border =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lty =</span> <span class="dv">4</span>, <span class="at">lwd =</span> <span class="dv">4</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="fu">plot</span>(clipped, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="50%" /><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAACVBMVEUAAAC+vr7////xRzILAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAR3ElEQVR4nO2d2XbzKgyFA+//0Gf9tUF7SwIcAx5y0EVjBoP4LInBafuJS6ryuVuBp8sC1JAFqCELUEMWoIYsQA1ZgBqyADVkAWrIAtSQBaghC1BDFqCGLEANWYAasgA1ZAFqyALUkAWoIQtQQxaghixADVmAGrIANWQBashsQCGEyT1MlsmAQng7oSsAvZrQJYDeTOiCGLQAVWUBasgC1JIF6IC8mNBFK+n3ElqAGnLVXuy1hC7brL6V0HW7+ZcSuvC4452ErjwP+orQU1ZPlx6YfTHk8JRt7rUnisfHm+jcjujiI9fDwxXzuZnQUwFBDLrX064+tP9mqMmEbiV0OaDKcG1JyLd828c57Ry5B5ABkWOyzo/fAxo7/d0FKJjM7UpX34u/76JHSZR7AeW5PI/I+tiXYw3uIzgvl79ZDSiYsRdz5fitEenWu+X6V89K+b/rCqAv4/Re8zcAsSHtpVwXAIZDdvQDFhQNHwTEhAIO+JhZvD4G/RMPkGdCgV3m6LAH4rkLUMxzl4k+Aav9XwFpE9ryck6qk/wqJY7OZSP5PAgQhWP62sM3y+mhcP7JjYBct0lpE7/F1+oN/wagWIorwQUkptUC8KOA4FhDcrSz/f8ARYODgGV/AjTGI227hU3dabnrW65qH8Z8dkCUIyBrre6NDnwn8ghAngFxPDroPDjfDWJ0HyCwG7WF0oDywFN2sdF827hodFsMKkpGAI4Cm5HKwCHW/xggM6vn41cGVB943u6eOqgtya2A+OiDXCsCIAQX3IFzZtMVv5FbY5AeGNtSCjwZGDmgbkw1M0zu+2UWAyhYEl6EcpvSzYxT82mA5KLIx47/RwFF5S9NQGb/jze+BdBx5YLZDaR7KxbkAIKl0rcqHJHBgL54fF5FvZIpLpigFb53uAwF5Nl/tbKTF9HX7E4+97Djw5sHjMDKSEBugPDrceDIQIKBUALk9PQaQM0KylUUHFvPu8/raQqh4YBa5T4kbsDlQ/nvBeTm5tIanVzH1HRNz+trBqGBgGBzibm1Yar5uiASceiuXwKE1+Arn38iFf+l9uwCILVmdlUYLOMAhfzD2oKuB3wyoT25Z/+7KaWiVN7SkXb/WoexMhyQ5mGChcSYBqBPln96orizfNZhrAwDlAyoqbXYFQOKClBsArrEhJ4G6J9Z7Hk/CeiA3WtAWQWg9ZGMvU5GAzHokjA9FJAfGdzTGwCUdEBAIeXk7Fy6h+m3AdKLFC4qVE3uk3QBd8s/PxpQ9kSnaT+rS4YBKuwgowsIJjJfiRagUtvRcfE+GX/cYXNtOjCgJqEYBUwZkNt7r4yLQUXt8DB0T2tA8YP+JXqZGA7zmt/4cBkEqHrIkevkqQeCdNIjTVYplTMZkLag0jn+MBkDqKqeAbRv2Mka7KInUlqlsMmJdOL1gIKe5clYEJCZ4cVy0K+m0omDANX54MEqyseXyDNWjGI8Jjb/AiAZQxHQnx7a4WKkbK6K0EcMoCIjALUMiCXHoFjkw4trVfZ32QzOw8hdA8hcyj0SZRxC4lwUnehArdVrp0wHxM/SnAZuI8efOV9w6PRuQW8B1FIkeNcEqOBHetHzQUB/jRSt6EmAmnq0AUVDiFwqZ2g/rDjaY2LQAT2qgHgmZxySbwmm3vO6qtZrj3QCMpvFxgHEIQuCczF3nlfNPxmQ5dPYzRMgGDaGHDpVLG1Sbb/64PL70bjSA8j9HlP9UeImgYatQk70AJW08CLRsPVjB6DiUWqQpbOuhnsENfAPTfQfntYZEKOABeiEbwtNApRPDdV0YgHxibSEIQxJChAbC3QJBa8BVLD8kAjtZ2WAwDEbCNr5ZtstFLmTxTkZBShoqQOSIagwTZnAzJwC2Y5VzvmBkZwH5CqJhKqAIvPRXpShUR3qT58vsWr3A9IQTgCSoGMhoUv5gCqn0SNNqA9Q1qQCqgSodGBmCdkQpVstfc/o7OBAOi0Ik5J9AFCgad6Jy8rhlLvZRxOpe0/FczIKEOZLOagbeB4OfGivvE0BguNoBgR+vPfuhPC+Sa0vSOOTy/miGvOB9PZJkcWuC/WxKx93HANU2ogcly5AxECv0LL6jtvtxdHBACakCyTptph637rUip4dZn+QhowonkSZ0Xpc6r5wOg+qOXxwgtw6zErElNBLybPjHAZIG4tT3VFVvTdlFlwCKad3+DSbjXsB6XQJkLnYum8A+qT5i+qZ3gPEIAvoxiCtNlc1C3Kuopq781yWC7U5pQjNvouTY/QA9UjfeVCex5LKEBd0ZXORzYGnKSrcMxikzItmKxaY1QDp2ayCapV1fyowF942AwhJGjlthLz1KKqkOuqRMYBkKYiXXNtcZB4NQJoUzmLKZB8NKF3qs71U21xpwzBH90VCaDbi4/FpgCAG0bOsR2kpyebiWFABkCGUnwUB4h77pP+tBgeCNiDpmgDlvKwWElGvh2z4MTH6MYBcNk4MMoTgG3gfmLvwwwSfMqAc+0IQWF1jY4VOSoh6PmlPYx4go04pChk+1sfE6+89D9okmAmlaNoGUCL04bVP+vTERulsQ7ykH3eo2AUo4FLtKKDIZxQp/MaoufjHHwKIV4kZBzl8z+h2nTruVedShwGlqh+a5M2Vvz7aAaVe6ekgsFGE+iwoX5BmjcqptniYflWIMYiO7+MWuth66OlEsaUnACKzpjUbaAm7JlhNwi/7sIeBbh8F5y8rlCXrBUr1SudC0VFPCNgqtPfXzoNHzznNF1ttlw3CUKbUJd2A5BIyW884FAgZdZBLrAJCLBpYjwwEpJ5nxYJSahygvVXVY8fYihp9Jcok8Cr4MUiqEKGyPmov8pFZXsORjp8DKDqAeHuditVdaGQ6Cm0frJ+KU+Zr0pB6GKB8YfRpAqIo4b0CI/3SbKdMKBpAT4pB1rGwLOIywNwXAy9wPrBApIusp5ArA2LNbregoCRlpg/I5Pu2np1J3QJyf2sjAgHoVcWjMYQGABINI7oP6eg4nLMM1AseUVDQbPYjfSurGR6ERgFSy9caoP3aBWR/RRx8j4yHfczt+nZAHHkCHsPsyit6eLn9HReDyKSVRGi7CahnbCWFvhSjXuG4ygDKFcxui1OJigGUo1AGjuGv+HLlaxlxYBZ3ZWATpm1LbyT/5Um8QX0+9F0pCkbpim0EpgF8DLzDPy+9gFh0BMCs/YZ84wfGbr+vqWIQaQpdxYSCGrcx8Lz0rqRFCfVc5RFSJbmPOOAiR0fvGiA2kzKg86QGA3IWIw6ggIDAcni2UipCZgsQ9AwZ54Y4AhAroe2JFtxY1QDaL/QZojluJGMlQHlnrEzmNkCkB5mQeoRRD0SfdfCnAqQjE/REa4kShnAfIDvRZ0PSGmlCyploBb1P7KnIBxRoFRSLgPTG+DuZBsh8wwts6g+gCjUaEE9k1se8/bED6DwZ0qtHkq3r9/Lu7nGnFNNKWs/iPqAUmYQodrSnydtydvfwBgACVf1rRAN5edSoSI5BBGjLyQXSIuqwXZFm3YMb4WIGCueT6US4UF5DsYjZxWxT+tUzKbFfSl7v0Eiv0+IAQhQKkOygaoBU0QYIA1FujZTYr/ec3oGBPl3i2Do4k+Ej+RuAhIGmeQ8QR+pAcY7exG+99w4ry5gYlK9ThrIYfOI5aebxqDlQlDa50lcEJ2Pf65d+QBEsfftpvU65hB0DARI7wtJscNBvMIDCIwFFVi0oLTUf2WqIGgxILaW9WBXVkwgU+IaMSvfXIaQbWXzMCchJfJjQ/lEEpBQOlsYEPoMAxaCCTVo7xv2aFN8+VDj5cF6e7RlPUph6U6b6SEBq0sq5udAuVVxAET0JQzfXUw/DajBoVHEcIKDA3kX7jQibIx8QJpVjJecjENmE/CfUL+MAbWIUTG4gfAJYUD5t1RE4TVlqJRS9r1D9ACBwBymluKyW03lSFzVlnrdfkzbIxskkQKKlN5KtIGlg5yjJOgZoGp04FlBQsVg/WjYvBQjXhhYQf7vD38hM4TMSUFaTc9Bu8giw1oeFz6pRT4lLDp9Br8GMDAdkcgCMBRW9nWjk4GNruXwGnB56MhNQVp258MNGn5JgpNaFiqFDZwoc0mSAFAxIQgOBCtw/xiDJ56BUAuRZ7ygZPYuhWO01HwECewu4cOLSx/ymRu5qyiBmAopqHDiYv0txKZiiYi7AYP2RCvuvahgDeh8g2ryrCB3oryXbd/MAJFUQg3KWPq+IQVq89XTM7vApAJJkZB+EGOQuDecwmgIo0PEY5GJEQj50khh1Ieb85dogHaeFoRmAEgknnwO0w0fNWpFSe06Zz5sA+coGDeiIxFydGtH+9TpAvrYMaE+zBTm/BpT+LRu1j31U++yRs4Cq+rQKt8U0+Ms2+pAijAAS+9irhEDHu9TfFEInAZXCjCovFfK2NeQ3HCkC/4H64D8/EEBmzqLV1aMA1SHUVJWbnUYUu1Q58TG1TZtDpRdQyY8ONRB9U0s5W1nQgpWcs5XB0hmDzPZ9vzh2fyz5IkJI/TAi07vUOjmigpyexRwbktRBQEUj9La2fIfBc8DtT0nXNK/MPGt3REUxikIpGotnRnDnzMXQkHUQ6heP8ZEb3AERA6xG2FLddnvnZcxCkY57RgNie9FW6sShoTLs1bP8/ELDYtRw+CAI6ZDj0J8Xfq17VYZtNTKb7xRUYYzyPQPKpfo2mR6e6GL/JMQCoENWbxdDtYnO2hROFF8o3ZaRbzUcCy/6kHN7sOFEhWMupa7ptm81r8ngtxrB53NUZbM5LyyruM2py+nhgLSynsrlMfiBpwhoi1SmYCSj8YBCCDgAN8BWCHlU3VkueiY7fjk9+s2qZ0VurVobURmZtaBS6/JtyVNDcGToN8wGAuLcQsa7LOg7QO79pYdvlwD7RxH/E2OQCyjqRFH7veAIIArdXnwbOY/N+H5Qg4G/1oW7CgbDSbfyaDpx8FsNWf3WGTQAFSwGU4Upbjyfwa99wkFA2u/2jaasE/k+nfBX0amtsTIJUNHHci2+Y09ITbpNd6FalaLRW/k4C9CBWu4Nvgm1nAjwPh3QMRsvA/IJHQM0h8+EV89NQuZvAbiLZn8h7RtoypzA53pAOI8Fu9QLqiLnFaaptMA4o25LrgYkrhVt5FEJp7wCaAqeSwHB7F/yK32tFwWFk4yJfC4EZCZ3KKJ6qjG9DCh52CR5OCDaXvk7kW0H16FwXW4BpD2lsnB2Vue29jw8cwHpCSqdMBtPqeEiG7IVZvOZCagQGqwd6Ip2Icg1lHNO5TPjO4rZUPxFnfqMDkkVoYJ6ocSo5vKZDyh4ZZFXhB6gYBNgmrmxieF5k2mAcuQoLnKkvsUIVDC4Y8tXmE+cBEiJFFA1qm5bkB0ELA+w/XgFn3mAjA1ZCOmnjVQmBuXriIAu4HMZIHPK5YfwXFxKUMMjtS7JREDka26lchPV1IV45gGSKx5LjiqnAV3LZ9Ishpt2GgzBqzRRSU093LAy5ZdZ9EwGRZKsDbENaIymB2Tmb/s4vgAWVG2hkmoY32i5GJAM7rgBxQM+OU/mLxRLtWotOMlrHUtkxm7e4PGGVpnC7G4+/iCgKDtwd2xFy/KWTFdPXSCzAEHqG0CVVxa/FYPw2n/43mhdBHeZzi5zZjG43E3IqVW5jXJ/D5A+DGvW2mq6de7zrV0mA4LTv+pEVsZzt0z60xSUCCVLCl59v5XbZCYgmJ8LrhagNt0/66sI38tEQIimFIt8w7o3LLPMBsTny0dv/31A+UAxG8nxUd89sbNM/PM4xOnwqO+f2FlmAoIUulr91gn6dMlFgGJ1upeqE7TplIkxKDpQqivrB+KZ9kfe1FsNfgvk3/FIPPMA6Ym+tuWIz8VzHaByxfBkPJMBtQPzs9Y8nsz6Q5PZhGJ1an88n7mAxMVsMWzXJqkwRuYDKh6jHlk43i/T/pZrNfo833CyTAXk2QctjV4gcwHpLF5iv0IuAvQik1EyL0iDsbyUzZ9MWyi+LNQUZSqgOW1fKwtQQ+bHoJfL1H8b8QuyADVkAWrIAtSQBaghC1BDFqCGLEANWYAasgA1ZAFqyALUkAWoIQtQQxaghixADVmAGrIANWQBasgC1JAFqCELUEMWoIYsQA1ZgBqyADXkPw/vTDrmvi+NAAAAAElFTkSuQmCC" width="50%" />
Note: Neither of the clipping function currently works well with
undirected networks!</p>
</div>
</div>
<div id="spatial-joins" class="section level2">
<h2>Spatial joins</h2>
<div id="using-st_join" class="section level3">
<h3>Using st_join</h3>
<p>Information can be spatially joined into a network by using spatial
predicate functions inside the sf function <code>sf::st_join()</code>,
which works as follows: the function is applied to a set of geometries A
with respect to another set of geometries B, and attaches feature
attributes from features in B to features in A based on their spatial
relation. A practical example: when using the predicate
<em>intersects</em>, feature attributes from feature y in B are attached
to feature x in A whenever x intersects with y.</p>
<p>When applying <code>sf::st_join()</code> to a sfnetwork, it is
internally applied to the active element of that network. For example:
joining information into network A with activated nodes, from a set of
polygons B and using the predicate <em>intersects</em>, will attach
attributes from a polygon in B to those nodes that intersect with that
specific polygon. When edges are active, it will attach the same
information but to the intersecting edges instead.</p>
<p>Lets show this with an example in which we first create imaginary
postal code areas for the Roxel dataset.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>codes <span class="ot">=</span> net <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">st_make_grid</span>(<span class="at">n =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="fu">st_as_sf</span>() <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">post_code =</span> <span class="fu">as.character</span>(<span class="fu">seq</span>(<span class="dv">1000</span>, <span class="dv">1000</span> <span class="sc">+</span> <span class="fu">n</span>() <span class="sc">*</span> <span class="dv">10</span> <span class="sc">-</span> <span class="dv">10</span>, <span class="dv">10</span>)))</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>joined <span class="ot">=</span> <span class="fu">st_join</span>(net, codes, <span class="at">join =</span> st_intersects)</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>joined</span></code></pre></div>
<PRE class="fansi fansi-output"><CODE>#&gt; <span style="color: #555555;"># A sfnetwork with</span> <span style="color: #555555;">701</span> <span style="color: #555555;">nodes and</span> <span style="color: #555555;">851</span> <span style="color: #555555;">edges
#&gt; #
#&gt; # CRS: </span> <span style="color: #555555;">EPSG:3035</span> <span style="color: #555555;">
#&gt; #
#&gt; # A directed multigraph with 14 components with spatially explicit edges
#&gt; #
#&gt; # A tibble: 701 × 2</span>
#&gt;            geometry post_code
#&gt;         <span style="color: #555555; font-style: italic;">&lt;POINT [m]&gt;</span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>    
#&gt; <span style="color: #555555;">1</span> (4151491 3207923) 1020     
#&gt; <span style="color: #555555;">2</span> (4151474 3207946) 1020     
#&gt; <span style="color: #555555;">3</span> (4151398 3207777) 1020     
#&gt; <span style="color: #555555;">4</span> (4151370 3207673) 1020     
#&gt; <span style="color: #555555;">5</span> (4151408 3207539) 1020     
#&gt; <span style="color: #555555;">6</span> (4151421 3207592) 1020     
#&gt; <span style="color: #555555;"># ℹ 695 more rows</span>
#&gt; <span style="color: #555555;">#
#&gt; # A tibble: 851 × 5</span>
#&gt;    from    to name                  type                                geometry
#&gt;   <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>                       <span style="color: #555555; font-style: italic;">&lt;LINESTRING [m]&gt;</span>
#&gt; <span style="color: #555555;">1</span>     1     2 Havixbecker Strasse   residential (4151491 3207923, 4151474 32079…
#&gt; <span style="color: #555555;">2</span>     3     4 Pienersallee          secondary   (4151398 3207777, 4151390 32077…
#&gt; <span style="color: #555555;">3</span>     5     6 Schulte-Bernd-Strasse residential (4151408 3207539, 4151417 32075…
#&gt; <span style="color: #555555;"># ℹ 848 more rows</span>
</CODE></PRE>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="fu">plot</span>(codes, <span class="at">col =</span> <span class="cn">NA</span>, <span class="at">border =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lty =</span> <span class="dv">4</span>, <span class="at">lwd =</span> <span class="dv">4</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="fu">text</span>(<span class="fu">st_coordinates</span>(<span class="fu">st_centroid</span>(<span class="fu">st_geometry</span>(codes))), codes<span class="sc">$</span>post_code, <span class="at">cex =</span> <span class="dv">2</span>)</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(joined, <span class="st">&quot;edges&quot;</span>))</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_as_sf</span>(joined, <span class="st">&quot;nodes&quot;</span>), <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAA51BMVEUAAAAAACsAADoAAEwAAGYAK0wAK2sAOjoAOmYAOpAATIcAZrYrAAArTGsrTIcra6M6AAA6Ojo6ZpA6ZrY6kNtMAABMKwBMa6NMh6NMh75mAABmOgBmOjpmkLZmkNtmtttmtv9rKwBrTCtro76HTACHo6OHo76Hvr6QOgCQOjqQZjqQ2/+jayujh0yjh2ujo4ejvr62ZgC2Zjq2kGa229u22/+2//++h0y+o2u+o4e+o6O+voe+vqO+vr7bkDrbkGbbtmbbtpDb25Db27bb////AAD/tmb/25D/27b/29v//7b//9v///9Jiw87AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAXZ0lEQVR4nO2deYPdtBHA3wYoV8KZQBNoIRCgLSlNCkmgrDbQZgNk9f0/T61zTlk+5GfvxvPHrp8sjTQ/j0aH364OdpdeOazdgK3LDqgiO6CK7IAqsgOqyA6oIjugiuyAKrIDqsgOqCI7oIrsgCqyA6rIDqgiO6CK7IAqsgOqyA6oIjugiuyAKrIDqsgOqCI7oIrsgCqyA6rIZEDnSXiimmlC3raKxxsYZSogtXWFz1PztlU80dCJgJazYwc0PO9lBzQoo/HSXO1I2TAguwOqyA6oJjugATKU0NUBZEfWOJDQDqiu9aoAGivDCL3EgIYRepkBDSa0RN2XAtDgoWwJuRSAxhEaMXtaVI66YTbCZGPGreIWk+PuKA63N9FZHdGRt1xr5uZYAe6zMqFtAUKjDXSvdXvakWbSWfpNpcNxcqFVCR1nsQrSF3qN4WpNLjK2jkmN02QdQNyAlCYAGTseUNvhby1ARiQmvTR7vD2+ikmtU2RdQHks7wE00lajPoLNb3eAGCw4IWoVMWicE3Htc5t7fEC8B/jrHkAj43TMyQpcjsVqFOk74YP7oQFC9g6gpHvQpQJkBZ8+QNjeQX5U6mGXCFCKu8yURAjno11maEeT+S4dIJvHLrCF/kqXbQBdkv0gECUGIWYpT+pX6cPQsWxwRB8i2wFEwnG+6S+t6hUFzY3XbSsCUrtN+iziN/S1fsVXA5AtxZUuViiAwLVqAK4ooLzuOA+A1M52yQDNfD8j+lj4nQD5LKk/ITSiR0q9bFCcLcderCZh6zCjATIYyqAYlHtkOz/aBCDLAKUsJrvQwM6Dx7tGjNYDhLoNBWQ5oGx4Si4qzcXaRaOVABldglrcx2J2+NljOOwxCUBb/wKVEMqFeBD0EcvWHxXPSKm5h11+QHTro7NQB2RIwNIA0UTZFTf/FTwpWj/A8yADgQdF3cI4xtWIDJcQEJorQgLEIDaRLPtOKknUiGxXElCRj7T/igKyrL9UAYn1PxS8PIBKvUDJKVYDAzxIAYQ3JEtN2A6gcpzQshbUgrsUJ0xIS76a0NwB0hSQ5v9F0XISQGw5xob5iA8rHNvcQdIO0Is7r3wDgH7/x3uHw7UPHuXbF9+/fzgcXncpyTV++uJ6yJOBoGE+Dew/34pq/Sdf5OTGI4g7v37q1P7lGQASVW8D0MXfDsmSTn7p2ujk2l/j7ZRwOLyTCPzzekg4+dhl8ElRLfKV07uHVx4bUeSvsaau1ljR54mQqFpt7mBpBeji4SEA8p+eH7J8zhMObwVjn/A80YMsBnR673B4NXNHRW77pMzHKzFq1Wpzh0ujDTPfUgfIf3px53B4o3Px/30SzPMJr33VmfSvj7rH/2XoOl3S1ybkeYwMwcGm859O7eOYEot4JV6tPescxfWu/3ZK3nzmCJGqH6PWrgvoV+/WXYMCoDPfXBu4vRu85a3gGM5k70L3D4c/PUi95KbLbMhSw8l3vkdlQGehSKfEF/EOdO1bX2PHpbsyrOqbqLVrvhf7vXtahw8+yYCg3fa397xND4O/O+N+vN5Z4EEFT/J5nE2GA/qpc5TDjY8yoA7LNVLEdL/ejm048zUYWnVAZVcH5Bz9s4u7GdCLW/FJZw4oc3fTAfo55ck8BaBO7cmfT53a2MPuHN6EIidfknE9PALTeVKiglitDujah89sAhQ6VHqwruG3yQQl0nuSgrXNxkVCOQadnbzzwLnNK99YG9XmIvd8mEZa7/iIY57TqlOYXhnQH+6ZdZZ0j9qPtc9R7+/c4DbJ/DyY+SQEJxNDbeqA0X7/648HwQV9rA1Fbqb5933PPRG6+P69COMJrTqPYxt4N48A4ZZ1PN7F2bpH7WPP/ThSO4MjUOCDNk+92nB9P3J0tzzfmO2hn/V85q/v06pv2tnSGBD2CC8MkJsupUEsAvL9IgMK2QigbvZgDQMU1fprD+j1z3zoOds2oDijKwNyfEIuBCj1CwQICMUJursuALr4+/ufulmGD87bBWTQUqMIyM1Nrn2brL2diDwhE6GgLv3sYj8D5MNQYpo0u5mGi84bBuSiaQWQsyJM5ywBBJacDwDkS6UimVCYKW4IkLZYDYCKo5hbRb7x2IaNxDyKWWwVDMeJUHBMf/0kdqs4R/ocssWK3o0jHaTAamyyNFvN+2V3uGSTkQjozK3kXZxIgPA86HYYvwWgPIoFQG+lqUCe42RCAU1hHjRDGgHy0TQtDtl09kt/9e+Df8Q2AgozaZtn0gFWUptGe5gHdR98EZtCd5glQ8bgtoWZ9AxpAyiYmQCxBZEzyvmPn//Y+K6rMzxSMX7RFD0DbXfEBVhcati4bAnVxXXWGeqnwV8Ka7EZsgQgtqSOcfjVr5HdeTUf1vc3rQRksgfF0OaKBLWncaX+23VHPVXpq9dX82v/KYKxFJDflPmB7gclf0niN3e+Cps7aa+WbJh5xQamV8Yt40Ctq6sb4rr17DO3y3qIOEjVj/XmjpJFAOFtvdtx0EES9jnojiIBBG88/JZrwoeLhMj/+y1IeVtUveqOIpa0CYSe2NO8MZx6EQHkeTxFm8fUg/LgZAggUHvycfQwv2fk5cNnrOqTVfekiSiA4NWC7053CCC/+5PynNz4GhbyyjB/1293pE4XXoTc+Bq66nf+rQZ+h5HUot2QLQAq38X7NuI1HwrceKlB3xryzxDDiXJaqdkMoNqLQvXlHgFE7YZkZihBQwrLOlnqmoBqfAYAIphQMhnPOEOaKCod/B2BiswFNKAdvYAsAmEYDkjX+cQ5Z4HQBGM0mQmINKMQEkZ7EOpEogsq6rcMSPLR4oF2zWJIQuPfatCsFT4klJeaNkPmAGJtGvIoSc/CZoef4c0qzdpPpxCdmvGZM5PmbRAtNWnxjvIoeWHgQoCMGNZpcJbVshFvol1CZixW+wDBCESfvOIWeGCPLw6p2whAghbJSSuaLUsDKng+godDNHs3n8oa6jRFQPmWKfXH8dIKkOHSDwgtR5MjJUBMW8pc8iBZi6h0lswBpDQSW9YLiP7FCvYgSC5OmLF+bRCTgFb5AhWF0AwQDvAsD01An1jrBLHVAOWW9IAqAdLKIccUPAzpblSr9B+aZZ2v4KltHAqI3paAhI8Y1t34o6FqLdWxAUBZNFI5nTee+0VyTG2ksrwcuwq3lRBurVkLEBmLcpugaZSP9Bg2cRHDPNWkYqkAQvOraYY2iUEGz5jlYkLpdlZ4FJkokqkM44UBC5boT6igrWsDQu1A7SeJtrRi4vcRIOmK8IlMxMNkM+nL5UgH3QIg0XIq2S3oHVqc/Fk4B4SrESM/8SCatDYgaIXq8/m2uIilSHEBSPgIAwSpoF0AWjFIs4b3eZBylQ3L3YUMjrRrsSScy9JsEtBaf4qQH28aPVBHEyU0F+LuQJ40Rk1BwgcthFOkqLnTpNVMOt3Q2IQb4kIZjMiGGXBDnISnCmgaoRVe+1BAMBXEl0QGeFABkMTCSYnZKa9oE4DAWjlYkeYiVMQxyERRA6Q4DvS+oHE7gGJz0OyHm8Azo0LsUvGgAiA5VqaqiCZao13xzSoJDAMBQUrKBdnJlxcwkeKcXAMkaloVkMpG8pGEkDGQnX67Q1FdAoTeI1mudCOAetikvPQ3AiQzFaKQZCNcCAe2rHe1d/NyQOFzZZSV/U6EkCHZHXpxqD5EdMg9tckyCxB5zkMBEag0bNRo0DziGitpRqjNm9VxgOg8gLOC/qHgIQNVD0xrWxGa50H5grSskpmtNIk35GG+uG6R3kOejgVf2gIgamR6sPhWajz1MmQW0UJHG8VC0ys5V6n4BJnzLVe9eejhKxO7nMegfpGU8m2JglOobDAMVmqWzFzNYxeCq+ozLj16MV9hvtADCGPhwOZIQ0DsefZ4UInbdEDxJtM9zTYqs/4UgbkEvkIfcQyCLCogOaEzinYdDlS8HUBWAURCdRLaVOQHtGgGpMRbUphDQJ90QKtsd1jLp69YqoC0sJr3pMF0yCDs9xlBIwbOY9BKgNgjJBliW+EDvuctIyXCh3M0D6KOWFjPa/tAkIBbe/S12HmW2LhzJvldMpZorJrME/VUAyhpcpwl0CYgFUcGxC0R1nlTlFQ9r556XlCrK9bVZsXHBTTEvBKg4dh0o68OIB2F7GBFDZcckPvNwqIl0zWU3/BLiMJssGETRTo2Yd3pc55d5AlGTs1tWBMQG8foL4tvxQ8ijY025LtSeKCkVQEvUMtGRSi7IiA26lrxCZbuYIglHoGevgdkaAE5VUBV2YRCy7IBQNRK8lzhEZJMvP10mQ6AUF19gNjeG82yJiBbAAQrDWihBES9DbIrXxqxGGpOqQBCNefWiu+9D5QWgFCrrOWTfxKQSFb8jOMFiUFJjHAI7H8EECxSqI4VAKEmoWtwIfYILTeEAWJLDQYIATGsJlwHdz3QsB4gGRqyI/G2CkKYT9QTuhhbyNGRgNTESOqAjFkjBkH1qCHE5dmYi30KJjZMDwKEbgtAbBCnDbA8za78V8/J1/l7eS1gx7t0upfVFAEBEHWWYGVvy8nh97qA6JNVrjEamibiN8QgAiik5FygEbcBqUmp6WrVLiag0HTaPfiFtCz5HCNkIJFXagXNmIZauS1AggDKMwgQuxUAqdpIIyxSpA9nE6QVIPrJKPZEi1gSAufKhy6mARKc4YYlASqonWtWljYxKF+nBOYx+IljNkiFyRNFxsIKrKxyNO+y1JlaSLP/HwS/qSECkEXWgAYMCOYF+G52OFaKApIMZ0qzf9GljFr5LuNTB6RMADNwmZ7juhjdGkgzQOgpW4ZAPPyYDRti8oSuCChXRVKZktZ8mv2bQBZs0tzRxmvNRmac/5EAWeEVJB+tTTKbZpQqrf7RpCGSU/NNZapSApQ/Zl0yH30YsgXTrNKk2b8qRcsB0rvIesOK0AvF/Y+slvVTKMnW9tmF9Cc0X9oBCiIamLoB8MGELLaRAJJzaaSI0agDWnMtRkUHhLoD9YqcEj7QrW7sbTjUC0AiVTRrc4AQBsWScIOW8Ndiq3sYoAqdtf/JWxbDugV/tPp4jS0rAmLf7tA7WpHPRgDlZtIU7DfZApnLizcEewIZD+EBlP1Ib9qWAIkUBEaCsnSSmYZ5clfmUvlQ6lQ2Cig3nXJRJkXMUuY5PIdGpwzHyyYAiUZi1+dzIUmCmmmISoSiyKfp/Bmk9SiGRbae80FW0YkiA2MZCnZ1WQFZaVFMxZ6Es5J5kJUAkM+Q0Q+5ZGtpPZPGguMHj9AMUCRCN8yE76Fbhkg1Bk2XZqciKKLNp63wBrjPPcjSPojYqFPDZRgtAsjQSR6kEq9gxqGJorJiKfQuwbi5LAEokVDS+ZBG+cj/gmfJpyqfywRIbyy6xc10IjbtVQdR7vbVOU8WBKS3lgJig1FQK6zXAlZfhpYy83936Hd7G2voZDr8Rh4kepRlSPiXAHRior3TDJ35nziLD6z3acpQTdSCQ5E8EgpSV3OhdQD1Q+jzdjCGKgEPslbphBoCxKncoHW+xNn3xKqxoAdQhht7lA4oFacayw60CUDQ+qqCPkB0qZqwUETCXyBXobmj7ANp8A+WciJ8GghIWEkBYRS8hMDDJ0+iuROsdNLgTzJpFPAXAzSAUwi1lhqL3EcN19CCzQFKQufDw797UvQg6g04G8GWtBT16c0dJY3ezeM+0RoQ9RfupUocqjZ3jDR79Wxf3PEn9cam58OPsmgp18MpRWQeFNRlKC9updOhQMmNRxCm3E9XtbVpoS8r2gKgfJRxaPkv6GisIL0pCRGojQHHouNbUZF4fFYsdhEOCQ7l7C/XeUUr/q0GiD+DNwMip6B54+S5aDQl2IcMCQH59N4hnrPKityGzuSq9ieK+2JPREV2C4DciYLhtD7Xan+O3qNwjl54/jglHEMmUlw24kEmntwWz1kVaknV8WizcDLgI36E3+qvfX71ru9ZuI/5JEZnoD/HUp7NqJ7WyGLQd763xNCGi3i1uOoMyJ8tydWuDcgdUXz44JPoLPksT/fhx+v+LMxTdrAoOimVnPcZ5p82lPXH83VqEyBUxKt12SBPuBGOGvWtwMeIrgzozB33DtHUndjnqDgDfIN9D8vnw4aUn9UTY8mG2f2oNgFiSvwjgDzhxotb8XBSQw6iXRvQtQ+foeHGxcl0nrC55w+0fM5SSB505nAEZL0LJbUJEFbyMEb2+yfvPMPHK7o8aVKAjjJeGdAf7rle3MWAUu/3p4KT47HjOeGFU6szoKyWAMpKziKg/zwwlgF6NwE62wwgLwjQfWhZPOL7jKXAcd9OguVGW5xhQFDEhCLpm7MIkH5K+ybezeuA4iHeZ+ioeJLi5Xk+yxhWElmtAihMq27mjQMAlI+xz2pnSztAIQbZACidMR9beQan8fpeUAQUNgmo2lfjJBCfMR+UxE8cEKl6rrQE1FmSPYi2ciigGCsMV+sluaG7xmGOAyJqZ0uzd/NxQTQMEI5BJkQlMpM2RC0BFIa452VALLTNlWaLVQToCcxzo1WxrWlwQaMYiVnirGcCKMdyOkJZkwB1NwqD4wxZCBCb4zynKTAP8vnvkXmQvygAejvF8ofY+NMAyJXRp1dzpC2g8HxfiFkyTUEz6bgiPUFT3nCBlqIJkFciZ8kJkO97suq50hiQdTbLddZFaS0W12t40RSvDKj9Jl9e+zIAwuusNMOwMRwpS7w50jZIu4uu/X1r97shkviUBy40n97VJ3RhMoMAuSJ+oUVX6hmQL6BuEsyRRQD5jZsfxO6PS/kopIQz6GkeodZYCsgpee0rY2iRPEe1pCKaZwszaQRowP6hwVt/eeoi3wWE+afVlEDVd6t5tgbIPhU70E/xVrGPJJCHbNqTlYbbSYItVyPVOjm9C1uuWtUbWawSQMo7jJ++uJ5TQqjNecqA0BLPdznljYUP+K+gHreJtxo9Uvw+A6xD+St0+trHKOV8WcNy50/VF3EbBcQW5umjfLsIGRVA8p07Z1t/UblNQGJvJyaTX1pGQYjlMDTrkBe5WwKE3kNrhAz7bRWS9LNJr0y5iuF8ZsjigIx2zxIrUbZz+IM6cpsUwX21FPGayWKAcuQodR6FQPm/Dyqaj+E+dpG/1TBc4AbJRrJnrciDIgekgqC3x+CzxPekDbYPuwLPlX6SQewcbpKc8dpiQEfgczRAPFboIVzuB/EPRPG0to+TBQGRvqZmKqqVc0H86Yh4lgMEV9SWHFUmAzoun2UAkS8tEmMIvLLaAYAmNXuCLPLHLHwkQ7fgo2bicEDj2zuyRJIl/9pH6QvIg/rU9gLSna/a3rFFohwZEBjXB4i7DC3Zurn9stgoVhuLxwKaFXg2BUjBo5lWBiQyX01AFlbgqm1FQNqUae7QtUFA6NNIQCV9VysG4Wv94WvW8iP8QMW0VmbZFiArJoaqhUpX0tTO61tRNgaIb4ZVc4Wcmtq5fSvKdgGh3b/egSzelS8O28gKm/b9gOgGhSl5kuH5iSEN11sbBYTG50JXMyh31Bp3FNtuNm/qtY9le8cpTKsWs+RgSIuwTGXDgOj+ck1eHkB5QzE7ySCr41LjqgMywMQSRxoEqM3ALvVOLLokIPQJd7W+otMN6ZXtA7K9wz1kXaA1XrYFCO2KcSi9M+uj7TOPkYX+TSB7q0HfAuklfPJCXWyGLAWID/R9S46cf06sWEoW+j+KykyolNGUlhrbkIX+j6JYbBTzkZsvDyBwIds7tDN4Lxsg6GLyNlquUb3TGrSYLA+otEZVJ45XBlDdkt7oU7zxkgHSog+ZGo1XO1E2NpN2om0gApYyn5cU0KC1/HKAVlms8krPmSBnEe+7eF6WPiTrkCYUM46QGTFINEEQin4zIC+7MyDrGLWbBTQ87wi1Y5qAb0009OUAtMEgPSwoXwJZ9NiIqyA7oIrsgCqyA6rIDqgiO6CK7IAqsgOqyA6oIjugiuyAKrIDqsgOqCI7oIrsgCqyA6rIDqgiO6CK7IAqsgOqyA6oIjugiuyAKrIDqsgOqCI7oIr8H+BKFidryZcwAAAAAElFTkSuQmCC" width="50%" /><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAElBMVEUAAABmwqWNoMvnisP8jWL////51OwRAAAACXBIWXMAAA7DAAAOwwHHb6hkAAATiklEQVR4nO2di5asKAxFo1X8/y/PVSGcPBCrBLV6yFrTLYhA9iThpX0pDNkVursDT5cBqCIDUEUGoIoMQBUZgCoyAFVkAKrIAFSRAagiA1BFBqCKDEAVGYAqMgBVZACqyABUkQGoIgNQRQagigxAFRmAKjIAVWQAqsgAVJHegOZ57txCZ+kMaJ5/ndAVgH6a0CWAfpnQBTFoANqVAagiA1BN/vH55cnWNX3/YUIXdf13CQ1AFbmq5z9L6LKO/yqh6/r9o4Qu7PZvErqy1x+19Xq9evXjI7n0f+sHjb0WIbrf6q7twfHWVkDLE3cjurj9w80lQLeHrqcCghhEt4ajq///fNJedK9sTHfI5YB2tj/IBOU1+TGgpkCvBjS7m7DLlsgKRwNa0p8CejU1ubsAzSbT7U4yoU+a+EuAolMBMetjHw70L5YGvbUd6i8JEKWI8+9XERB73WF9X6/GhK6fZSgPW6/ztqwB9GGcjiX/BiDhbiVAqO8Bpf+ABQXDBwHJDlFck236HtL652PQ2ujaqgTkmRBJlzmq9k+PYrFRHrtMeCYs9n8FpE2Ie/JvRGPdNueKcYd97FDtvzyTjq06gMI67PP/fTCYT6bTK9SmXW1a2+FWhYvhrDqBIAXo4EDW1LsCN369LIQ8QP8SFhCM9DUAfxTQRiglFi8xznZwpP9TgIQJAa3sWCpAM6adevl2K8Xu2tCM67AEaPYAbUyk7VT4LD+WIu22++8F5BnQzDaQzAViUK3WkAs28rW7AAm7kYB4ypiZRMXX6x3F1XDXhNBNgGYhRMgnIaDMgvLPHcXFFvafAiR3YnkqlLvHqu8pnlTB0H5ebgUktz5SXwwgZ7hXEmcGUQDnebk1Bqk3PNfrOGq9cuCBqFsYxyS0tjOh+84tea6YMrZwFJwVPIhblbjTeK74NEDLBUx8PD5W/z8KKJD8GKgKCIxK1rR4JSvycECzWJvvt6zbTs/uWJADiGAOkB7/vv9ON5uKjLr7LTurAT2TKQQiIJAr6eQLTauFycyxwk5eACch5BMkn/WnYNyHUMta54OAYGoYO0GwNMvjvDQfCWj9ZU8Z20sHQNUCK4Zclg9Y+YRV+9NGg0xWR126VFozn9kREYl8QGJZ/9OAyOWTMsWKlMWU/ZdlI7IxIXLHqh6EGtbpvN8TOK6oPVYPUMrSfHgsyyZU6PrvAsLrJUEOofkAIOlZlxBqVyXl6gjEONLK8QigfDRGZACtsamjNh2qjIDMi4Y60JB0NSw3ixgUGE9I7x1KUL8FKBlQtdcqVue7gIwwNK83E5FsQBeZ0O2AMiEwKbHkUNew8fp7gOzAbZvQgPg+eJxZk6kN/GRJFxBqCsiM3G4TihAXwIftJjQTStvU/qD5WECUZ4K1JuSMCArAs3kLgzSgeDBY6n1rQs0A5ZlgrYlsa8sM0u/EDqD9qVDzr4Oa1kdHYpCwoKIlSELLdX2uaD9laCDtYlCxdzhMxbQGtE2O7EM4VL3iqC8A5cp7fXzXqNa93ulRCgDl57ZkooRGIwHlm1iw46eJbSrerUUDiiTkppmI2nGWI95eyNto0Fw0qm50wvWA5JsumZAFRHqEz64lATXRoNr7fpVwcLFkOBARWUAhiGP2dNYqGvwLgDwv2rOgtSir/ULJvoT3WyiwIy0A1QwoftqTCHgxSPLhKgUfEZpLh6xQ5KRWsif96gC1HQLiiMPeZzIJiVjm77yx2M73ugOSExwTRdio+Ocmr7z9k8f25GopJP0IoFoV5F0LQGQsSI1jkJlI5VIeiicBqtZQByRfUVwEDAdYuLHo5cJ4TAw6MEnbBRQ9UAHSJ2E+H3i/yuJouE3R7HGMIYUyBQuSPkZ5a9U5I9PyaECWT2U1LwElJpTYxpQoWuGTV7E7XTshZ+qxxxceIHITIvIE4Wmq6D6dPLTJ7YSmO6WNHjWRdhb7heKZ2RTOyNZUGqzwvJlrEbD4rkD0dEDZHKRNWUByR3qOrzMgFQOoMJQFRPQzgJTXOds/tFHhgquW0mxIGk0RECMq+uN5Lb99dNayD8is8eUQqADF0TzdFYBIlFxzqh9Nfa3lR4L6eG+2wNjtNYeeZVFuKmY+no9tZ/9B3wwt59EnAEUI+IpCA0DpYzHrUgYQplTftmHtW82knANEKSw6gBy7wOZm/R5M4mMJee72UgNZEKmXGfa/lpMWhMmcfQBQ5BtvW0DGRrS7pQLSusQeSBNGrQBhfr4PgDIIeFzcXXCxttJGcoKD00tfJXVUwD47qJ0L0szITtEsH0gn0wHK8TAoqosDESPg8f84IGVTX8gpQNFPxJ8fs4uJoKN4ilp2u1Ga0HaDEeSzRLOEZf0piLP7Le8eQCbAzHlNlXO1/toxzX3QV+9L5xROtF/muGNLAKJnAAKf8cITaYuJ2WbtkbVRgCBlR36C32axcS8gkfZezlTtyAZrgIyNKEA5N9duV2Mn+JyeSfP/upoFuS3OIoJvY5kJPvBUzsJSQRZru1w9U82cxzESUdfy8U0okpwBkFptRM1fzpoDToBUiHrpds7IiWrQWOwitNiQBmTWKfGmiMPMSWSl6QBTcYzurLQBlDZQg7j0GypbUAGQxaJJmR3ss6p5/f5cFKCsrTvLdoJQemtKeBhPrCwg5zPN/IbQWuOzAEEMylSqURrm3KkQY8kPFgDZQ47EQwA6r5rt9/dPS/eoA+IcLgXF00Ua4uXBmAfNArItnVXx1NMuGycGGUKAEYqLMbrsWgbQ9sSWgjXJeWkHiMpsREsOIBufXH9y2RgTimTA186qeO5xZUHlKl1ARMJ+ErLNVUo4XBviVqMVPQKQ+I7wKKBA225H/IATPyjjUaxAYymDKXW9VbLBNbuOX+t45lmxP3gcEGFYzpbEw71ds4OyLiv+MJrUt3fnCZ2zoHQhxq4aIPVRR7yEd/QCxiAdbK31ZEBcIpc8o57q9heilJx5DiPmODGyrD8JP+8ltXuE2BZxNDRe59iYGAPPqAd1fScpYsgPU5mGeu/HuBX+kbecjQ0UjMJlgzBIPX5GTgPKl5BJid0uIJNtu6NsYQeQ2mBrNQ1qCQiNad+CdO55QPFmkE54Qrdijz4SZRJ4NfsxKBfxAfmEsralyJOvHwVIf6yTLk3FshVjZGb9qg+RQFkPD+6kPQxQulB2oCv2AIlFCcGdZZzjjVeYfxv9X7juYiQv9sNTqvld/1CMY6mKOY/Mc0F9Qqf+iRY2gAyI9d4BxNU9w4JiAJHj/MxbGEBNHWXkp0U2VJP1E2PTy86TwQdVPGpDqAGgdJ3z1NRaN1MAhNVoQCLGvN/vmPHGmvsEoVaAlNp7gDDeFPvD2i00WOv1+r0Ip58MSOo4TVOQgIKmh5f/is9zMK+n6PRKI65A3+8MKMSMXUBndCt16OvHp4kJLal/vya/GRLFDSIVrt5vNqG3ALT9yj5GBDEo5m7lW2n45eNRz6Sx/BXwlmgQ8gSiRaeo17quTVSWB9PVZlXpDuVqydRzntBJQKue06IKksFUKpNoiAdjLjHndxI+/GAdc0/BhGIB8/cJuJ6bAaGWG5qUXn9N+WdCIZ5TD//T09NL7OMvgj4mzKQM6HtSjQGlWA0IHEBobVCcQDHbRcisAYqgA/L5llALQHAdBAMTkEQAmjSg5ULoxV1UBoFBCHXfvG31N1nHbYA4RMfrbELMgBuinLCAuCQGXu7i+y0JZR+D0L2Dge4DZAd6CEKyIBhb4GiVs7Z6oibSBsgH9BazoFAERHRfDAplQFgzONp6SUF6Zy6eAYG2BlBhEPcAnX5T+jSgpYZtBBJxh/ODHLPWuwwIDG0PUAYivEmGbeFtqW9N1DspKpI414BG5dn4zTFIAFr/I1HK8jL63PspQhIdasWgpk0n6AsDKK8RJCHKmcE1IDOfbPRHc3oAMgSgzCFAKuJsgHImqWVGCG9D6Dn/OhQqCcOTByjEtRtmLQ/EkLRWkMZvDUjF6XiLIPqwk5nR7ZQ0iUFyi92xmMwHTC5j5bUbTgF1lNaZqyAxmAKcX8SzNEEt4kdAIgqXXcoHmRO1yz9WyWik8tKkMDq10Erqdr6W6F1BhaWQ445cyosKFCBnAvi2w5QwKembTbTS7Z2rJRsKzHI2ydEmFd+KIaUJtjt0t3Q8ErlIowOfVtGMVLBJc8cQr4VNuY627XixenlHkORKCiaUCYZl1kYp7Oz5euTgJGufxJRwDxAHHh7t9dI8kQMUhtnzXGyRCcd2rp4dCYa1/IAFhEnlWMn5BAg2offjAW2iAJlNarw78RJO7Cyv8jZz6Zh6W/kDgERscj1NAkLzSDc4ywIyuQ0V6gMIPsgGQAQjvtm+x+5kNWGGtQOoG53QFpCOxSTwLGbijGV6c3bJsoDSoiK4SEReQ4Wwmw1kU1IEXgxAIgJhqUkKn22I7qUoXbOjdupAw41EBZ9gwVhQQU4yoyPK4JN+e1SEY/Xg0xUQeg5wSXuP0AFhQaJbMmyX6XSBI3rSQAoGxEt1CUqRwBiU85OnmUhj+XQi1HoUQ0kek3FoPoCURPoNexd8RP/GEV2uYX8TUJwCEoCKuTYUCVeM+sIqTDHBbdd1Kv2bgMTiPYhj+y0WC9NKc4RlCrVZDhqG5KM8jX4kBu3UDe9/JCyEsyIAtCTRclIVyMadGvZh1AXQJLbHIFf4EfAxp2RCc8xR3gXFOnlZD0DJRJx8PaQZPmIqnbY+2OtqfH4JkBryU3Ma0JpB+RJi0BpdeFEnfcnzr58D5BJSHmaWYssvo73alrZ47FFiM/kWUPxfXbxZBAS7QBCyt+q267J9bDkU9G3yX01rIl8CKoUZdb/QJllD4sd41mzOugwzqK6fCZ0BtAdh51bAUORUIrnUdsNIrda+UGZXzgIqYKhWuwOIjWNTWPMRFgRO/rwYZAFxsl7rHiC5VE1YJKL1t/hbd1zqS40K8vUolgBBJ7OyBwGRZYy9QhR67FLmQqQnT63k1DC/KceIWNsjlU4TvE5luyWNZflve2vjHU1HkICXzp8FSFWS1D1cZzmMCWtAvQW22Lo+Wf1Kh5I0Opvn9zo+qvMYIBOcxW41xqEecbrZ0XP++UGVJowlcfhgxMkNih2D1awarw2aVcdsPqtRhTGWPCJ5oZfeepCH71naEmpXG4UCoP05Y3paP0ZpJPfcxg7yMF18KqD4wo+ssDbhxsfJhpPSaY6GJsN0U0KNTzXcc41jgERvZODxHBAA6en0swHBuSpRAVCZGLmBpwhoDcpkbrQcytoDWv0s+kthPbJjU27gcUe5YD1ty2p7xNH6ZFVpX/Y6vw4/8JhO4szZ3Gk7G2oHaGoKaL+TZUDOrOmc3AXIfb50AGinAPGXicjN+fQGFHQCPzy0jxfmMeQmyd5rz6d1DEqvA7vVMjvvLoAtGIxMuv9OVms6TmdOVpbHMef2UUAFi8EUjO12lG8qbefl0zFAwsu21+5XtvyQgwQTYuojrpvz6QXIPxDKfJiQCFq+WRgvKhnY8pervu15UfoAOlDKfcA3oZoTQTR6OqBQpxP2APmEjgHqw6cH8lqV+JmPsTiPUHXPkKLfdeBzPSCCXUcVmmV/3H8S1B+mttxmn6kKuRpQvBlHLqcPjuUcA9QFz6WAYPQv+ZW+XhOAxPnbAbFErzfwLgRkBvdCJ2QC/wZV6UyAOkx//O60qbEloIBHiN7iYmuvT/jxWmtRYx2Q/Fx1d+KMC1AXUK/Rq9CbFjVylWpOlJJkPGUPVyZUnCP15NMTUGFObe1AF7Sr+eIObHc+XeaeW52FVYczdptyMuimbXjHgvrz6Q9o8u6Jhm0xYTA5QTmHK+sYnnU/21W5xZjJIeROeCzGLeTE2TYO88R3o0X1xtMJ0MQvPcuVqDucUwFQiIdHaE4I6N2n91p6AIoaK0LKGab41gJ554gmBmF3zcSoq1wFSMeKNb8cQIpTR3jXrnv4sT1pVGWCkglZXQpzALdXOqWmRX2lVwxar5w4PcWD6e8BXcun0yiGi3ZBIqf2+BwB1KSrB6TTJtwkJN+C5F7LdUBtenpAugDy/1bOIjCoHe+Vszhr0MuDcjGgYy/j6w2N9eelWHTjTUW6V/lVqcOdytPDNh38SNoDcvB4mMoN+/9Swl8DRLAH7RpSqWH/jeCeX8bvSy9AkPoEUOmdcvprMQiv/VDkNewuHu4ynSh9RjG+3Ni4odq07K+tbvOt1H7fSo+PYwU89/lW6kHnSg8OZGU8d0sfQObIwrck8sr7tdwmPQFlNKXFO0FpkH6vInwuHQEhmlIscv84wc1hWUpvQAnNXrTW8vcBTfjF9yRSR7r05wFNmQmnKluI0KHbB3YpPQFBisCedrvzkNCc5SJAYXe45848Dk/XGBQcKLsz6wfi6Xb2BsfzHH32DzOeiacfID3QE04eS+WfKFcBKhVcbz0XT2dA9cAch7gHS6/OsQmF3aH9kwn2PdIVUJwjOuutiOXw9PE+6Q/IayHH7afz6feKjfhTd1qebzgsXQF59kH1dzseJX0B6Sz8xyR6NdxYLgJE5T/b+XDp1evsQ7/LZpVOXZ/SOPXLbFbpCqhP3dfKAFSR/jHox+XXQ0R3GYAqMgBVZACqyABUkQGoIgNQRQagigxAFRmAKjIAVWQAqsgAVJEBqCIDUEUGoIoMQBUZgCoyAFVkAKrIAFSRAagiA1BFBqCKDEAVGYAq8h/I69AIwsCeHgAAAABJRU5ErkJggg==" width="50%" /></p>
<p>In the example above, the polygons are spatially distinct. Hence,
each node can only intersect with a single polygon. But what would
happen if we do a join with polygons that overlap? The attributes from
which polygon will then be attached to a node that intersects with
multiple polygons at once? In <code>sf</code> this issue is solved by
duplicating such a point as much times as the number of polygons it
intersects with, and attaching attributes of each intersecting polygon
to one of these duplicates. This approach does not fit the network case,
however. An edge can only have a single node at each of its endpoints,
and thus, the duplicated nodes will be isolated and redundant in the
network structure. Therefore, <code>sfnetworks</code> will only join the
information from the first match whenever there are multiple matches for
a single node. A warning is given in that case such that you are aware
of the fact that not all information was joined into the network.</p>
<p>Note that in the case of joining on the edges, multiple matches per
edge are not a problem for the network structure. It will simply
duplicate the edge (i.e. creating a set of parallel edges) whenever this
occurs.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>two_equal_polys <span class="ot">=</span> <span class="fu">st_as_sf</span>(<span class="fu">c</span>(poly, poly)) <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">foo =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>))</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co"># Join on nodes gives a warning that only the first match per node is joined.</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="co"># The number of nodes in the resulting network remains the same.</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="fu">st_join</span>(net, two_equal_polys, <span class="at">join =</span> st_intersects)</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co">#&gt; Warning: Multiple matches were detected from some nodes. Only the first match</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="co">#&gt; is considered</span></span></code></pre></div>
<PRE class="fansi fansi-output"><CODE>#&gt; <span style="color: #555555;"># A sfnetwork with</span> <span style="color: #555555;">701</span> <span style="color: #555555;">nodes and</span> <span style="color: #555555;">851</span> <span style="color: #555555;">edges
#&gt; #
#&gt; # CRS: </span> <span style="color: #555555;">EPSG:3035</span> <span style="color: #555555;">
#&gt; #
#&gt; # A directed multigraph with 14 components with spatially explicit edges
#&gt; #
#&gt; # A tibble: 701 × 2</span>
#&gt;            geometry foo  
#&gt;         <span style="color: #555555; font-style: italic;">&lt;POINT [m]&gt;</span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>
#&gt; <span style="color: #555555;">1</span> (4151491 3207923) a    
#&gt; <span style="color: #555555;">2</span> (4151474 3207946) a    
#&gt; <span style="color: #555555;">3</span> (4151398 3207777) a    
#&gt; <span style="color: #555555;">4</span> (4151370 3207673) a    
#&gt; <span style="color: #555555;">5</span> (4151408 3207539) a    
#&gt; <span style="color: #555555;">6</span> (4151421 3207592) a    
#&gt; <span style="color: #555555;"># ℹ 695 more rows</span>
#&gt; <span style="color: #555555;">#
#&gt; # A tibble: 851 × 5</span>
#&gt;    from    to name                  type                                geometry
#&gt;   <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>                       <span style="color: #555555; font-style: italic;">&lt;LINESTRING [m]&gt;</span>
#&gt; <span style="color: #555555;">1</span>     1     2 Havixbecker Strasse   residential (4151491 3207923, 4151474 32079…
#&gt; <span style="color: #555555;">2</span>     3     4 Pienersallee          secondary   (4151398 3207777, 4151390 32077…
#&gt; <span style="color: #555555;">3</span>     5     6 Schulte-Bernd-Strasse residential (4151408 3207539, 4151417 32075…
#&gt; <span style="color: #555555;"># ℹ 848 more rows</span>
</CODE></PRE>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># Join on edges duplicates edges that have multiple matches.</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="co"># The number of edges in the resulting network is higher than in the original.</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>net <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>  <span class="fu">activate</span>(<span class="st">&quot;edges&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>  <span class="fu">st_join</span>(two_equal_polys, <span class="at">join =</span> st_intersects)</span></code></pre></div>
<PRE class="fansi fansi-output"><CODE>#&gt; <span style="color: #555555;"># A sfnetwork with</span> <span style="color: #555555;">701</span> <span style="color: #555555;">nodes and</span> <span style="color: #555555;">1097</span> <span style="color: #555555;">edges
#&gt; #
#&gt; # CRS: </span> <span style="color: #555555;">EPSG:3035</span> <span style="color: #555555;">
#&gt; #
#&gt; # A directed multigraph with 14 components with spatially explicit edges
#&gt; #
#&gt; # A tibble: 1,097 × 6</span>
#&gt;    from    to name                  type                          geometry foo  
#&gt;   <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>                 <span style="color: #555555; font-style: italic;">&lt;LINESTRING [m]&gt;</span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>
#&gt; <span style="color: #555555;">1</span>     1     2 Havixbecker Strasse   residential (4151491 3207923, 4151474… a    
#&gt; <span style="color: #555555;">2</span>     1     2 Havixbecker Strasse   residential (4151491 3207923, 4151474… b    
#&gt; <span style="color: #555555;">3</span>     3     4 Pienersallee          secondary   (4151398 3207777, 4151390… a    
#&gt; <span style="color: #555555;">4</span>     3     4 Pienersallee          secondary   (4151398 3207777, 4151390… b    
#&gt; <span style="color: #555555;">5</span>     5     6 Schulte-Bernd-Strasse residential (4151408 3207539, 4151417… a    
#&gt; <span style="color: #555555;">6</span>     5     6 Schulte-Bernd-Strasse residential (4151408 3207539, 4151417… b    
#&gt; <span style="color: #555555;"># ℹ 1,091 more rows</span>
#&gt; <span style="color: #555555;">#
#&gt; # A tibble: 701 × 1</span>
#&gt;            geometry
#&gt;         <span style="color: #555555; font-style: italic;">&lt;POINT [m]&gt;</span>
#&gt; <span style="color: #555555;">1</span> (4151491 3207923)
#&gt; <span style="color: #555555;">2</span> (4151474 3207946)
#&gt; <span style="color: #555555;">3</span> (4151398 3207777)
#&gt; <span style="color: #555555;"># ℹ 698 more rows</span>
</CODE></PRE>
<p>For non-spatial joins based on attribute columns, simply use a join
function from <code>dplyr</code> (e.g. <code>dplyr::left_join()</code>
or <code>dplyr::inner_join()</code>) instead of
<code>sf::st_join()</code>.</p>
</div>
<div id="snapping-points-to-their-nearest-node-before-joining" class="section level3">
<h3>Snapping points to their nearest node before joining</h3>
<p>Another network specific use-case of spatial joins would be to join
information from external points of interest (POIs) into the nodes of
the network. However, to do so, such points need to have
<em>exactly</em> equal coordinates to one of the nodes. Often this will
not be the case. To solve such situations, you will first need to update
the coordinates of the POIs to match those of their <em>nearest
node</em>. This process is also called <em>snapping</em>. To find the
nearest node in the network for each POI, you can use the sf function
<code>sf::st_nearest_feature()</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># Create a network.</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>node1 <span class="ot">=</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>node2 <span class="ot">=</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>edge <span class="ot">=</span> <span class="fu">st_sfc</span>(<span class="fu">st_linestring</span>(<span class="fu">c</span>(node1, node2)))</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>net <span class="ot">=</span> <span class="fu">as_sfnetwork</span>(edge)</span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="co"># Create a set of POIs.</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>pois <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">poi_type =</span> <span class="fu">c</span>(<span class="st">&quot;bakery&quot;</span>, <span class="st">&quot;butcher&quot;</span>),</span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a>                  <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.6</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>))</span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="co"># Find indices of nearest nodes.</span></span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a>nearest_nodes <span class="ot">=</span> <span class="fu">st_nearest_feature</span>(pois, net)</span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a><span class="co"># Snap geometries of POIs to the network.</span></span>
<span id="cb15-17"><a href="#cb15-17" tabindex="-1"></a>snapped_pois <span class="ot">=</span> pois <span class="sc">%&gt;%</span></span>
<span id="cb15-18"><a href="#cb15-18" tabindex="-1"></a>  <span class="fu">st_set_geometry</span>(<span class="fu">st_geometry</span>(net)[nearest_nodes])</span>
<span id="cb15-19"><a href="#cb15-19" tabindex="-1"></a></span>
<span id="cb15-20"><a href="#cb15-20" tabindex="-1"></a><span class="co"># Plot.</span></span>
<span id="cb15-21"><a href="#cb15-21" tabindex="-1"></a>plot_connections <span class="ot">=</span> <span class="cf">function</span>(pois) {</span>
<span id="cb15-22"><a href="#cb15-22" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(pois))) {</span>
<span id="cb15-23"><a href="#cb15-23" tabindex="-1"></a>    connection <span class="ot">=</span> <span class="fu">st_nearest_points</span>(pois[i, ], net)[nearest_nodes[i]]</span>
<span id="cb15-24"><a href="#cb15-24" tabindex="-1"></a>    <span class="fu">plot</span>(connection, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-25"><a href="#cb15-25" tabindex="-1"></a>  }</span>
<span id="cb15-26"><a href="#cb15-26" tabindex="-1"></a>}</span>
<span id="cb15-27"><a href="#cb15-27" tabindex="-1"></a></span>
<span id="cb15-28"><a href="#cb15-28" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">4</span>)</span>
<span id="cb15-29"><a href="#cb15-29" tabindex="-1"></a><span class="fu">plot_connections</span>(pois)</span>
<span id="cb15-30"><a href="#cb15-30" tabindex="-1"></a><span class="fu">plot</span>(pois, <span class="at">pch =</span> <span class="dv">8</span>, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-31"><a href="#cb15-31" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">4</span>)</span>
<span id="cb15-32"><a href="#cb15-32" tabindex="-1"></a><span class="fu">plot</span>(snapped_pois, <span class="at">pch =</span> <span class="dv">8</span>, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAD1BMVEUAAABmwqW+vr78jWL///+38iX9AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADV0lEQVR4nO3Zi27aQBRAQR75/2+uCiRtI8y0LnixfY4SUBQkr0fx9UIOH/Www+gFvHsBoYBQQCggFBAKCAWEAkIBoYBQQCggFBAKCAWEAkIBoYBQQCggFBAKCAWEAkIBoYBQQCggFBAKCAWEAkIBoYBQQCggFBAKCAWEAkIBoYBQQCggFBAKCAWEAkIBoYBQQCggFBAKCAWEAkIBoYBQQCggFBAKCAWEAkIBoYBQQCggFBAKCAWEAkIBoYBQQCggFBAKCAWEAkIBoYBQQCggFBB6BHQ8LrYMdT6POnJAKCB0H+hKcwMa6nST+fNpyaaAjh+/mMYCna9Pv/2waBOX2EXlpjT2Qrui3B4GXGhTM+inyxVp9CC6sFy/RwyiySF9PF6NRvtcYS5fQwb19F3seG3BtUx1vjXk4PeAjndafGGXzvdadglvDXTX5w2Abr3LFfYJdTqNOPaaZtBpBNGq7mKnAUTr2ge9D1A76c96L4Z6N4/W+nnQYtNoxUDLEK0VaDGiNf9XYxGiNQMtMonWDbRAAaGA0COgMZ8vzOtl02hDQK9Z7laAXka0HaAXEW0J6CWTaFtALyggFBDaKtDTptFWd9JPu6NtFehpRNsFehLRloGeMom2DfSEAkIBoa3ug743exrtCGje6ewFaDbRfoBmEu0JaNYk2hfQjAJCAaFpoMPhdNruNvJrGh1+9uCFU787fPXspb1HtzuaT3OvQDei2UCHw/aFvhFNvOgvgDbcbKCBax5Wf0EoIPRvQDu4i13yaQYU0KPmA3kPvpF0mjsg+L8CQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhgFBAKCAUEAoIBYQCQgGhH7Pw+2UN3uGQAAAAAElFTkSuQmCC" width="50%" /><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAADFBMVEUAAABmwqX8jWL///+NN8fgAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADEUlEQVR4nO3Y0W6jMAAAQaD//8/XGHq5U+NsGylNhWYfECI84FEMmOVNd1tefQG/PUARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQdA9oXX/sMl7Ztt37FRCg6hGgneYAOq/TTnMATZxmQOvbsqzrcuyftO0dZVm2bTn2bzWZYu8qA+iyOa3PUBlAl81kos3uQRehHenEPrvQjjS7EU2AhswwWs/8pjRkhtE2G+YUaBcas+zUbXvLd4DWG716HE9o+xygf7rh81WgfYqNSfbiQfxIY4J9a4odQsc/Z3LCOVo+btPTYc6BPubWky7td3S9SU/PmB3/+5h/0qX9jq6P+ekZk+PHi+KZFxqXjhfF6ULj3lLjWKWeWmi4DJtvLjXWw+a6f8q2w+a6/zmfOx763LF3Xpn/8kUxAhQ9DqQ3QBmgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKPoDjVa/ZkPuMfUAAAAASUVORK5CYII=" width="50%" /></p>
<p>After snapping the POIs, we can use <code>sf::st_join()</code> as
expected. Do remember that if multiple POIs are snapped to the same
node, only the information of the first one is joined into the
network.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">st_join</span>(net, snapped_pois)</span></code></pre></div>
<PRE class="fansi fansi-output"><CODE>#&gt; <span style="color: #555555;"># A sfnetwork with</span> <span style="color: #555555;">2</span> <span style="color: #555555;">nodes and</span> <span style="color: #555555;">1</span> <span style="color: #555555;">edges
#&gt; #
#&gt; # CRS: </span> <span style="color: #555555;">NA</span> <span style="color: #555555;">
#&gt; #
#&gt; # A rooted tree with spatially explicit edges
#&gt; #
#&gt; # A tibble: 2 × 2</span>
#&gt;         x poi_type
#&gt;   <span style="color: #555555; font-style: italic;">&lt;POINT&gt;</span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>   
#&gt; <span style="color: #555555;">1</span>   (0 0) bakery  
#&gt; <span style="color: #555555;">2</span>   (1 0) butcher 
#&gt; <span style="color: #555555;">#
#&gt; # A tibble: 1 × 3</span>
#&gt;    from    to            x
#&gt;   <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;LINESTRING&gt;</span>
#&gt; <span style="color: #555555;">1</span>     1     2   (0 0, 1 0)
</CODE></PRE>
</div>
<div id="blending-points-into-a-network" class="section level3">
<h3>Blending points into a network</h3>
<p>In the example above, it makes sense to include the information from
the first POI in an already existing node. For the second POI, however,
its <em>nearest node</em> is quite far away relative to the <em>nearest
location</em> on its <em>nearest edge</em>. In that case, you might want
to split the edge at that location, and add a <em>new node</em> to the
network. For this combination process we use the metaphor of throwing
the network and POIs together in a blender, and mix them smoothly
together.</p>
<p>The function <code>st_network_blend()</code> does exactly that. For
each POI, it finds the nearest location <span class="math inline">\(p\)</span> on the nearest edge <span class="math inline">\(e\)</span>. If <span class="math inline">\(p\)</span> is an already existing node (i.e. <span class="math inline">\(p\)</span> is an endpoint of <span class="math inline">\(e\)</span>), it joins the information from the POI
into that node. If <span class="math inline">\(p\)</span> is
<em>not</em> an already existing node, it subdivides <span class="math inline">\(e\)</span> at <span class="math inline">\(p\)</span>, adds <span class="math inline">\(p\)</span> as a <em>new node</em> to the network,
and joins the information from the POI into that new node. For this
process, it does <em>not</em> matter if <span class="math inline">\(p\)</span> is an interior point in the linestring
geometry of <span class="math inline">\(e\)</span>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>blended <span class="ot">=</span> <span class="fu">st_network_blend</span>(net, pois)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>blended</span></code></pre></div>
<PRE class="fansi fansi-output"><CODE>#&gt; <span style="color: #555555;"># A sfnetwork with</span> <span style="color: #555555;">3</span> <span style="color: #555555;">nodes and</span> <span style="color: #555555;">2</span> <span style="color: #555555;">edges
#&gt; #
#&gt; # CRS: </span> <span style="color: #555555;">NA</span> <span style="color: #555555;">
#&gt; #
#&gt; # A rooted tree with spatially explicit edges
#&gt; #
#&gt; # A tibble: 3 × 2</span>
#&gt;   poi_type       x
#&gt;   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #555555; font-style: italic;">&lt;POINT&gt;</span>
#&gt; <span style="color: #555555;">1</span> bakery     (0 0)
#&gt; <span style="color: #555555;">2</span> <span style="color: #BB0000;">NA</span>         (1 0)
#&gt; <span style="color: #555555;">3</span> butcher  (0.6 0)
#&gt; <span style="color: #555555;">#
#&gt; # A tibble: 2 × 3</span>
#&gt;    from    to            x
#&gt;   <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;LINESTRING&gt;</span>
#&gt; <span style="color: #555555;">1</span>     1     3 (0 0, 0.6 0)
#&gt; <span style="color: #555555;">2</span>     3     2 (0.6 0, 1 0)
</CODE></PRE>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>plot_connections <span class="ot">=</span> <span class="cf">function</span>(pois) {</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(pois))) {</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>    connection <span class="ot">=</span> <span class="fu">st_nearest_points</span>(pois[i, ], <span class="fu">activate</span>(net, <span class="st">&quot;edges&quot;</span>))</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>    <span class="fu">plot</span>(connection, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>  }</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>}</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">4</span>)</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="fu">plot_connections</span>(pois)</span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="fu">plot</span>(pois, <span class="at">pch =</span> <span class="dv">8</span>, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="fu">plot</span>(blended, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">4</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAD1BMVEUAAABmwqW+vr78jWL///+38iX9AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC90lEQVR4nO3Zi26iQABAUZD+/zdvKuwrAU5rs4xb743WNEoYTsow1OmtTptGD+DZCwgFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGA0BnQPF82DLUso/YcEAoI7QOtNBvQUKdN5u+XKzsCmt9+M40FWtaXP365tINT7K6yKY090VaU7ceAE+1oDnp3WZFGT0R3lvU5YiI6nKTneTUa7bPC3B9DJurjq9i8duFYjlq2hux8D2je6fKB3Vv2unYITw206/MEQFvPcob9hBqz7+Yg1FUMtQ5CraRR92Kou3nU/4NQQCgg1LcaKCAUEAoIBYTOgG63y4ahxg0lIBQQCggFhAJCAaGAUEColTQKCAWEAkIBoYBQQKh1EAoIBYQCQgGhgFBAKCB0DDRNt9vTLCP/HdD03tn7Z9tp4/8/H2ZAjwFN00sIfeAwPwD0In0KaPRgR9RfEAoIfQ6oq9ivTzy85bcoIPQ4kNfg3yQd5gsQfK2AUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEAoIBQQCggFhAJCAaGAUEDoB5pv++8oKEzEAAAAAElFTkSuQmCC" width="50%" /><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACcElEQVR4nO3XQQqDMABFwfT+ly5d1J0+U0iVdmarxM9DEMeDQ+PqAXcnUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAYT/QePnikgMrp9TZe9fGZsWqKSun9NkCfRZojNsUWjnlxNknAv2JqUBXj72CNygIFOYC+Yptd1ywapJA4Z6B/Gq8ry967s8QKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUnhSpP2sESoA6AAAAAElFTkSuQmCC" width="50%" /></p>
<p>The <code>st_network_blend()</code> function has a
<code>tolerance</code> parameter, which defines the maximum distance a
POI can be from the network in order to be blended in. Hence, only the
POIs that are at least as close to the network as the tolerance distance
will be blended, and all others will be ignored. The tolerance can be
specified as a non-negative number. By default it is assumed its units
are meters, but this behaviour can be changed by manually setting its
units with <code>units::units()</code>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>pois <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">poi_type =</span> <span class="fu">c</span>(<span class="st">&quot;bakery&quot;</span>, <span class="st">&quot;butcher&quot;</span>, <span class="st">&quot;bar&quot;</span>),</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>                  <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.6</span>, <span class="fl">0.4</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>))</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>blended <span class="ot">=</span> <span class="fu">st_network_blend</span>(net, pois)</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>blended_with_tolerance <span class="ot">=</span> <span class="fu">st_network_blend</span>(net, pois, <span class="at">tolerance =</span> <span class="fl">0.2</span>)</span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="fu">plot</span>(blended, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">4</span>)</span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="fu">plot_connections</span>(pois)</span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="fu">plot</span>(pois, <span class="at">pch =</span> <span class="dv">8</span>, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="fu">plot</span>(blended_with_tolerance, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">4</span>)</span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a><span class="fu">plot_connections</span>(pois)</span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a><span class="fu">plot</span>(pois, <span class="at">pch =</span> <span class="dv">8</span>, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAElBMVEUAAABmwqWNoMu+vr78jWL///+rHfdQAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADpElEQVR4nO3cAW7aSABAUUjI/a+8G0yargp8u9thptL7SkBRkD082eMxkXL60NNOsweweoAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUAYoARYAiQBGgCFAEKAIUzQK6XCbt+GiAIkDR64E2mi+g5aFmAF0+fsBcAP3aFeXrOFrdZ8oc9MlyO4yW95kzSV8ut6NofZ9JV7HLdhD9BT4vB7rc68VjONSLge76APq19WG+MgdFrmKRdVBkJR25F4vczUc+D4oARYAif9WIAEXPgM7nlw2jenubtWdAEaDoPtBGcwMa4vT+vu91N5n/Pr2yR0Dnj2+muUBv29NPP7y0B6fYVeWmNORE2wt0Q7k9TDjRHs1Bny4b0piJaDfQxrJ9z5iIHk7S5/NmNGii3g90hbl+TZmoH1/FzluD9nsA6JPm2qChPO8e0PlOf3q/+4De7vWnh/K8pYHu+iwAdGvkGXboFPuYeIZNm4OOtNwcdG3wVexAa17FRq+D9rfmOmj4Snp3a66kx9+L7W3Re7Hxd/N7W/Rufmv69PPdap8HbY0EOrQOApStCTSyg0DzAhQBigBFgKJnQCPfxMFtz/MEFM0COhigCFAEKAIUAYoARWsCjWwh/OcBigBFgCJAEaAIUOTjjghQZCUdAYoARYAiQBGg6DHQ6fT+PmoZefrsyMvnDeXR704/GjOmf9/x3m2PHsrzbQP6PaDTadywTt9Ae7Y9fCjPt70DaEg3oIU6BDR+OH85kCNoOtB6HQOafOlYaCiAAP2/bT+71RgypN/Z9syh+Pc4EaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUAQoAhQBigBFgCJAEaAIUPQPKwo2SAQTfucAAAAASUVORK5CYII=" width="50%" /><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAElBMVEUAAABmwqWNoMu+vr78jWL///+rHfdQAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADoUlEQVR4nO3bgU7iSgBAUVD8/1/eJ8Xd97LAbd/uMGNyblRihHY8aadTjKcPPe00ewCrBygCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkDRLKDLZdKOjwYoAhS9Hmij+QJaHmoG0OXjJ8wF0O9dUb6Oo9V9psxBnyy3w2h5nzmT9OVyO4rW95l0FbtsB9E38Hk50OVeLx7DoV4MdNcH0O+tD/OVOShyFYusgyIr6ci9WORuPvJ+UAQoAhT5q0YEKHoGdD6/bBjV29usPQOKAEX3gTaaG9AQp/f3fc+7yfz34ZU9Ajp//GKaC/S2Pfzrm5f24BS7qtyUhpxoe4FuKLcvE060R3PQp8uGNGYi2g20sWyfMyaih5P0+bwZDZqo9wNdYa4fUybqx1ex89ag/R4A+qS5Nmgoz7sHdL7T397vPqC3e/3toTxvaaC7PgsA3Rp5hh06xT4mnmHT5qAjLTcHXRt8FTvQmlex0eug/a25Dhq+kt7dmivp8fdie1v0Xmz83fzeFr2b35o+/fxqtfeDtkYCHVoHAcrWBBrZQaB5AYoARYAiQNEzoJG/xMFtz/MEFM0COhigCFAEKAIUAYoARWsCjWwh/OcBigBFgCJAEaAIUOTtjghQZCUdAYoARYAiQBGg6DHQ6fT+vsg/bI4cyumzZz9/9rp68R904JAYOZTeNqD/B3Q6DRbaDzRyKDu2vQNoSP9MKot1CGj8cL45kCNoOtB6HQMafhU70Mih9LYBAfqzbT+71VhB59rIodS2FyFYN0ARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoOgH/js3kgaof24AAAAASUVORK5CYII=" width="50%" /></p>
<p>There are a few important details to be aware of when using
<code>st_network_blend()</code>. Firstly: when multiple POIs have the
same <em>nearest location on the nearest edge</em>, only the first of
them is blended into the network. This is for the same reasons as
explained before: in the network structure there is no clear approach
for dealing with duplicated nodes. By arranging your table of POIs with
<code>dplyr::arrange()</code> before blending you can influence which
(type of) POI is given priority in such cases.</p>
<p>Secondly: when a single POI has multiple nearest edges, it is only
blended into the first of these edges. Therefore, it might be a good
idea to run the <code>to_spatial_subdivision()</code> morpher after
blending, such that intersecting but unconnected edges get connected.
See the <a href="https://luukvdmeer.github.io/sfnetworks/articles/sfn02_preprocess_clean.html#subdivide-edges">Network
pre-processing and cleaning</a> vignette for more details.</p>
<p>Lastly: it is important to be aware of <em>floating point
precision</em>. See the discussion in <a href="https://github.com/r-spatial/sf/issues/790">this GitHub issue</a>
for more background. In short: due to internal rounding of rational
numbers in R it is actually possible that even the intersection point
between two lines is <em>not</em> evaluated as intersecting those lines
themselves. Sounds confusing? It is! But see the example below:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co"># Create two intersecting lines.</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>p1 <span class="ot">=</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="fl">0.53236</span>, <span class="fl">1.95377</span>))</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>p2 <span class="ot">=</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="fl">0.53209</span>, <span class="fl">1.95328</span>))</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>l1 <span class="ot">=</span> <span class="fu">st_sfc</span>(<span class="fu">st_linestring</span>(<span class="fu">c</span>(p1, p2)))</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>p3 <span class="ot">=</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="fl">0.53209</span>, <span class="fl">1.95345</span>))</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>p4 <span class="ot">=</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="fl">0.53245</span>, <span class="fl">1.95345</span>))</span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>l2 <span class="ot">=</span> <span class="fu">st_sfc</span>(<span class="fu">st_linestring</span>(<span class="fu">c</span>(p3, p4)))</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a><span class="co"># The two lines share an intersection point.</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="fu">st_intersection</span>(l1, l2)</span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a><span class="co">#&gt; Geometry set for 1 feature </span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a><span class="co">#&gt; Geometry type: POINT</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a><span class="co">#&gt; Bounding box:  xmin: 0.5321837 ymin: 1.95345 xmax: 0.5321837 ymax: 1.95345</span></span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a><span class="co">#&gt; CRS:           NA</span></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a><span class="co">#&gt; POINT (0.5321837 1.95345)</span></span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a></span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a><span class="co"># But this intersection point does not intersects the line itself!</span></span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a><span class="fu">st_intersects</span>(l1, <span class="fu">st_intersection</span>(l1, l2), <span class="at">sparse =</span> <span class="cn">FALSE</span>)</span>
<span id="cb20-21"><a href="#cb20-21" tabindex="-1"></a><span class="co">#&gt;       [,1]</span></span>
<span id="cb20-22"><a href="#cb20-22" tabindex="-1"></a><span class="co">#&gt; [1,] FALSE</span></span>
<span id="cb20-23"><a href="#cb20-23" tabindex="-1"></a></span>
<span id="cb20-24"><a href="#cb20-24" tabindex="-1"></a><span class="co"># The intersection point is instead located a tiny bit next to the line.</span></span>
<span id="cb20-25"><a href="#cb20-25" tabindex="-1"></a><span class="fu">st_distance</span>(l1, <span class="fu">st_intersection</span>(l1, l2))</span>
<span id="cb20-26"><a href="#cb20-26" tabindex="-1"></a><span class="co">#&gt;              [,1]</span></span>
<span id="cb20-27"><a href="#cb20-27" tabindex="-1"></a><span class="co">#&gt; [1,] 4.310191e-17</span></span></code></pre></div>
<p>That is: you would expect an intersection with an edge to be blended
into the network even if you set <code>tolerance = 0</code>, but in fact
that will not always happen. To avoid having these problems, you can
better set the tolerance to a very small number instead of zero.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>net <span class="ot">=</span> <span class="fu">as_sfnetwork</span>(l1)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>p <span class="ot">=</span> <span class="fu">st_intersection</span>(l1, l2)</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="fu">plot</span>(l1)</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="fu">plot</span>(l2, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_network_blend</span>(net, p, <span class="at">tolerance =</span> <span class="dv">0</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="co">#&gt; Warning: No points were blended. Increase the tolerance distance?</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="fu">plot</span>(l1)</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a><span class="fu">plot</span>(l2, <span class="at">col =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_network_blend</span>(net, p, <span class="at">tolerance =</span> <span class="fl">1e-10</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAACVBMVEUAAAC+vr7////xRzILAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEhElEQVR4nO3c0W7cZgwFYTXv/9BFdhdFgqYer/2TPFRnrgOS+gA7Ui5y/bAPu6YPSE8gSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIOhWQNfPTs88PG+y69XZoUenzSbQx11XhZBANPXksNkEggSi/CUNCUT5oggd1/lxL6AKH4FwaMHMoUp8BMKpFUNHqvG5D9D5v+Bfc0umDlTkcxugKh+BcHDR3ObKfATCyVWDW6vzEQhHl01urNDnFkBV74jP4XWj26r0uQNQqY9AOL1yeEu1PgLh+NLpDRX7CITza8eXV+0jEC4onl9cuc9yoNKPjNeK6gWl1fvsBmrwEQh31K8oq8NHIFzSsKOoFh+BcEvHkpJ6fPYCNbwjPve0bCmoyWctUJePQLioac/h2nwEwk1di47W5yMQrmrbdLBGH4FwV9+qY3X6bATq+sh4bWvcdahWn4VAvT4C4brWbQdq9hEI9/Wu+3bdPgLhwuZ936zdZxlQ7zvic2X3wm/V77MLaMBHINzZv/LLTfgIhEsHdn6xER+BcOvE0i814yMQrh3Z+oWGfNYADXxkvBbPrH27KZ8tQGM+AuHmqcVvNecjEK4e2/xGgz4C4e651Z9u0mcD0Ng74nP74O5PNuqzAGjWRyBcP7r9Ew37CIT7Z9dj0z4C4QHD+6FxH4HwgukDPmzeJxto9iPjdcP0AR8V4BMNlOAjEJVww38U4SMQFXHEH8vwEYjKuOIPhfjEAiW8Iz4KOeNfpfikAsX4CETFHPJbOT4CUTmX/FKQj0BU0Cn/lOQjEJV0y6son0CgmI+MZ1HHPMryyQMK8xGICjsnzkcgKuyeOB+BqKyD8nyygMLeER9FXRToEwWU6CMQFXRTpI9AVM5RmT4CUTFXhfoIRKWcleqTApT4kfEs5K5YnxCgXB+BqIjLgn0EohJOS/YRiAq4LdonACj3HfHR/HHZPvNA4T4CUdPnpfsIRE3/1yHpPgJRswfm+whEnb/wr893XW/84fPNAL1x4PW/BHqjBT9go0ArfASi5o7c4SMQNXblEh+BqKkzt/hMAYX/Q/QvjQHN7H2/mUP3+AhEjVy6yEcgauLUTT4CUQO3rvIRiOo/dpdPP9Cej4xnA0DdG79X97nbfASimu9d5yMQ1XvwPh+BqNaLF/q0Am17R3zUC9S47FSNN6/0EYjqO3qnj0BU29VLfQSius7e6iMQ1XT3Wp8moJUfGc+6gFrWVNRy+WIfgaiO0zf7CEQ13L7aRyCq/vjdPvVAi98RHzUAVW+orfr87T4CUcX3r/cRiKp9gP0+AlGlT3ADH4Goyke4g08l0PaPjGelQHWz+6p7iHv4CESVPcVNfASiqh7jLj4CUUXPcRufIqB7vCM+qgIqGTtRyZPcyEcgquJR7uQjEHX2Wa5nR2cOd/RhLoFgmEAfz7puKCQQJBAkEOQvaUggqOBF8ejE8W72OOcTCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBII+htwKoHjLhbZuwAAAABJRU5ErkJggg==" width="50%" /><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAACVBMVEUAAAC+vr7////xRzILAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEl0lEQVR4nO3c2W7UUBAAUcP/fzRiPGIRYcqe3N5uqp5Rd/tICfZLju/2sqP6gO4JBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQRtBXT8bPXMxfMqO56tHbp0Wm0Cve44IoQEoqkrh9UmECQQ5S9pSCDKF0Vouc73vYAifATCoQEziwrxEQinRgwtKcZnH6D1/8E/54ZMLSjIZxugKB+BcHDQ3OTCfATCyVGDU4vzEQhHh01OLNBnC6Cod8RzeNzotCJ9dgAK9REIp0cOTynWRyAcHzo9oWAfgXB+7Pjwon0EwgXB84ML9xkOFPqR8VwRvSC0eJ/ZQAk+AuGO+BVhZfgIhEsSdgSV4iMQbslYElKOz1yghHfEc0/KloCSfMYCZfkIhIuS9iwuzUcg3JS1aGl5PgLhqrRNC0v0EQh35a1aVqbPRKCsj4zntsRdi0r1GQiU6yMQrkvdtqBkH4FwX+66T5ftIxAuTN73ydJ9hgHlviOeK7MXfqp8n1lABT4C4c78lW9X4SMQLi3Y+WYlPgLh1oqlb1XjIxCuLdn6RkU+Y4AKPjKei2vW3q7KZwpQmY9AuLlq8a3qfATC1WWbb1ToIxDurlt9uUqfCUBl74jn9sLdFyv1GQBU6yMQri/dfqFiH4Fwf+16rNpHIDygeD9U7iMQXlB9wMvqfXoD1X5kPG+oPuBVDXxaA3XwEYjqcMN/auEjENXiiA/r4SMQ1eOKD2ri0xaowzvioyZn/FMXn65AbXwEotoc8ld9fASi+lzyR418BKIanfKrTj4CUZ1uedbKpyFQm4+Ms1bHPOrl0w+omY9AVLNz2vkIRDW7p52PQFSvg/r59AJq9o74qNVFDX1aAXX0EYhqdFNLH4GoPkf19BGIanNVUx+BqC5ndfXpAtTxI+OsyV1tfZoA9fURiGpxWWMfgagOp3X2EYhqcFtrnwZAfd8RH9Uf19unHqi5j0BU9XndfQSi6u47zsr2X6zswEMgWCzQ673HEKH193271G+ga/8+ohqgi8d9XaCLfeEfsauLZ/gIRBW/KJZtv1wlUNnqOxX+iFVtvpdAUN1/80WL71Z054jfz4/KgGr23q/m0Dk+AlEllw7yEYiqOHWSj0BUwa2jfASi8o+d5ZMPNOcj46wAKHvj58o+d5qPQFTyveN8BKJyD57nIxCVevFAn1Sgae+Ij3KBEpetKvHmkT4CUXlHz/QRiEq7eqiPQFTW2VN9BKKS7h7rkwQ08iPjLAsoZU1EKZcP9hGIyjh9so9AVMLto30EouKPn+0TDzT4HfFRAlD0htiiz5/uIxAVfP94H4Go2AeY7yMQFfoEG/gIREU+wg4+kUDTPzLOQoHiZucV9xB7+AhEhT3FJj4CUVGPsYuPQFTQc2zjEwS0xzvioyigkLEVhTzJRj4CURGPspOPQNTaZxnytxHvtPRhpvzxyDsJBK18mDF/wPZOAkECQQJB/pKGBIICXhSXTixvs8dZn0CQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQNAP9LWBdHo3XrgAAAAASUVORK5CYII=" width="50%" /></p>
</div>
<div id="joining-two-networks" class="section level3">
<h3>Joining two networks</h3>
<p>In the examples above it was all about joining information from
external features into a network. But how about joining two networks?
This is what the <code>st_network_join()</code> function is for. It
takes two sfnetworks as input and makes a spatial full join on the
geometries of the nodes data, based on the <em>equals</em> spatial
predicate. That means, all nodes from network x <em>and</em> all nodes
from network y are present in the joined network, but if there were
nodes in x with equal geometries to nodes in y, these nodes become a
<em>single node</em> in the joined network. Edge data are combined using
a <code>dplyr::bind_rows()</code> semantic, meaning that data are
matched by column name and values are filled with <code>NA</code> if
missing in either of the networks. The <em>from</em> and <em>to</em>
columns in the edge data are updated automatically such that they
correctly match the new node indices of the joined network. There is no
spatial join performed on the edges. Hence, if there is an edge in x
with an equal geometry to an edge in y, they remain separate edges in
the joined network.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>node3 <span class="ot">=</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>node4 <span class="ot">=</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>edge2 <span class="ot">=</span> <span class="fu">st_sfc</span>(<span class="fu">st_linestring</span>(<span class="fu">c</span>(node2, node3)))</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>edge3 <span class="ot">=</span> <span class="fu">st_sfc</span>(<span class="fu">st_linestring</span>(<span class="fu">c</span>(node3, node4)))</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a>net <span class="ot">=</span> <span class="fu">as_sfnetwork</span>(<span class="fu">c</span>(edge, edge2))</span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>other_net <span class="ot">=</span> <span class="fu">as_sfnetwork</span>(<span class="fu">c</span>(edge2, edge3))</span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a>joined <span class="ot">=</span> <span class="fu">st_network_join</span>(net, other_net)</span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a>joined</span></code></pre></div>
<PRE class="fansi fansi-output"><CODE>#&gt; <span style="color: #555555;"># A sfnetwork with</span> <span style="color: #555555;">4</span> <span style="color: #555555;">nodes and</span> <span style="color: #555555;">4</span> <span style="color: #555555;">edges
#&gt; #
#&gt; # CRS: </span> <span style="color: #555555;">NA</span> <span style="color: #555555;">
#&gt; #
#&gt; # A directed acyclic multigraph with 1 component with spatially explicit edges
#&gt; #
#&gt; # A tibble: 4 × 1</span>
#&gt;         x
#&gt;   <span style="color: #555555; font-style: italic;">&lt;POINT&gt;</span>
#&gt; <span style="color: #555555;">1</span>   (0 0)
#&gt; <span style="color: #555555;">2</span>   (1 0)
#&gt; <span style="color: #555555;">3</span>   (1 1)
#&gt; <span style="color: #555555;">4</span>   (0 1)
#&gt; <span style="color: #555555;">#
#&gt; # A tibble: 4 × 3</span>
#&gt;    from    to            x
#&gt;   <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;int&gt;</span> <span style="color: #555555; font-style: italic;">&lt;LINESTRING&gt;</span>
#&gt; <span style="color: #555555;">1</span>     1     2   (0 0, 1 0)
#&gt; <span style="color: #555555;">2</span>     2     3   (1 0, 1 1)
#&gt; <span style="color: #555555;">3</span>     2     3   (1 0, 1 1)
#&gt; <span style="color: #555555;"># ℹ 1 more row</span>
</CODE></PRE>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">pch =</span> <span class="dv">15</span>, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">4</span>)</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="fu">plot</span>(other_net, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">pch =</span> <span class="dv">18</span>, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">4</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="fu">plot</span>(joined, <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">4</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAACVBMVEUAAAD/AAD///9nGWQeAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADEklEQVR4nO3Y21LiQBRA0fT8/0dbyk0KOrtEECas9Ui6NdkFgZzlH6uWZ5/AqxMoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECm8daDkzWbOyf4yHnNbr2IUZ48ZAY2y90L7PvtBkzXT3GJsvdOizKzRZM9s8xvYLHft8FZqsmewd36wd28LxfaHrISYvr/2LK3/9fz/+6UeBXu0C/iLQ5GbiHXRw8z1osmALTvfoH9+DfIsd10x3b7/P734H+SW9X7Oyf+t9fh3oPcQHRaBFoHXzT9fu8J+dyKsSKAgUBAoCBYGCQEGgIFAQKAgUBAoCBU/zQaBgYBYECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoGJgFM+kgUBAoCBQECgIFgYJAQaAgUBAoCBQECp7mg0DBwCwIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQMDALZtJBoCBQECgIFAQKAgWBgkBBoCBQECgIFDzNB4GCgVkQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgYGAWzKSDQEGgIFAQKAgUBAoCBYGCQEGgIFAQKHiaDwIFA7MgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAwcAsmEkHgYJAQaAgUBAoCBQECgIFgYJAQaAgUPA0HwQKBmZBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgoFZMJMOAgWBgkBBoCBQECgIFAQKAgWBgkBBoOBpPggUDMyCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBQOzYCYdBAoCBYGCQEGgIFAQKAgUBAoCBYGCQMHTfBAoGJgFgYJAQaAgUBAoCBRuCrScecyJvYCvq/sMtHKZAgk0J1A49NkVmqyZ7nyPQGMcC03WzHa+hzFOhQS6NL4R6NI4I9ClO72Dru/cgHvdgx54is+13Olb7IGn+FynT9n8Mt8+kF/SKw536rXL3O7V34lAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQ+AOXwdmEmT8kQAAAAAElFTkSuQmCC" width="50%" /><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACkklEQVR4nO3XQYqEMBBA0cz9Lz3Mot31fA20sfW9bQxUfQRx/PCvsXqAqxMoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgKF94HGnxMnWaTWfHc2Np+Y6jJ6TYHmAo3xiEI71twR6CEOBVo97AreoCBQOBbIV2x7YvrmLQgU5gP51XidnzbJVQkUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBArTgUbcvIla893Z2HxiqsvoNQWaCzTGIwrtWHNHoIc4FGj1sCt4g4JA4VggX7HtiembtyBQmA/kV+N1ftokX0qgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoChV/PiTfqaA2MbwAAAABJRU5ErkJggg==" width="50%" /></p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
